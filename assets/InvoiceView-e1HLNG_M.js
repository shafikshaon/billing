import{r as oe,e as h,s as x,k as ie,c as o,a as e,b as ae,w as U,f as ue,o as i,g as u,t as s,d as j,F as $,h as R,u as S}from"./index-CHdhSjhx.js";import{_ as de}from"./SectionCard-D4lkJobp.js";const re={key:0,class:"row g-3"},me={class:"col-12"},ce={class:"btn-group btn-group-sm"},pe={class:"d-flex justify-content-between mb-3"},ve={key:0},he={key:1},xe={key:2,class:"text-muted small"},be={key:3},ge={key:4,class:"text-muted small"},ye={key:0},fe={key:1},_e={class:"text-end"},ke={class:"mb-2 info-block"},Ne={class:"fw-semibold"},Fe={key:0},Ie={key:1,class:"text-muted small"},we={key:2,class:"text-muted small"},Te={key:0},Ae={key:1},Se={class:"table table-sm table-invoice align-middle mt-2"},$e={class:"fw-medium"},De={key:0,class:"text-muted small"},Ce={class:"text-end"},Me={class:"text-end"},Ve={class:"text-end"},Pe={key:0},ze={key:1},Le={key:2},Re={class:"text-end"},qe={class:"mt-2 d-flex"},Be={class:"totals-card"},Ee={class:"line"},je={class:"line"},Xe={class:"line"},Oe={class:"text-decoration-line-through"},Ye={class:"line grand"},He={key:0,class:"line"},Qe={key:1,class:"line"},Ue={key:2,class:"line"},We={key:3,class:"line"},Ke={class:"fw-semibold"},Ge={key:4,class:"muted small mt-1"},Je={key:0,class:"mt-2"},Ze={class:"table table-sm mt-1"},et={class:"text-end"},tt={key:1,class:"mt-3 invoice-terms"},st={style:{"white-space":"pre-wrap"}},nt={key:2,class:"mt-2 text-muted"},lt={key:3,class:"mt-2"},ot={style:{"white-space":"pre-wrap"}},it={class:"pos-receipt","aria-hidden":"true"},at={class:"pos-head center"},ut={class:"title"},dt={key:0,class:"small muted"},rt={key:1,class:"small muted"},mt={class:"pos-line small"},ct={class:"pos-line small"},pt={key:0,class:"pos-line small"},vt={class:"pos-items"},ht={class:"sl"},xt={class:"desc"},bt={class:"nm"},gt={class:"muted small"},yt={class:"amt"},ft={key:0},_t={class:"pos-totals"},kt={class:"pos-line"},Nt={class:"pos-line"},Ft={key:0,class:"pos-line"},It={class:"pos-line grand"},wt={key:1,class:"pos-line"},Tt={key:2,class:"pos-line"},At={key:3,class:"pos-line"},St={key:4,class:"pos-line"},$t={key:1,class:"small muted"},Dt={key:2,class:"center small muted",style:{"margin-top":"4px"}},Ct={class:"pos-receipt","aria-hidden":"true"},Mt={class:"pos-head center"},Vt={class:"title"},Pt={key:0,class:"small muted"},zt={key:1,class:"small muted"},Lt={class:"pos-line small"},Rt={class:"pos-line small"},qt={key:0,class:"pos-line small"},Bt={class:"pos-items"},Et={class:"sl"},jt={class:"desc"},Xt={class:"nm"},Ot={class:"muted small"},Yt={class:"amt"},Ht={key:0},Qt={class:"pos-totals"},Ut={class:"pos-line"},Wt={class:"pos-line"},Kt={key:0,class:"pos-line"},Gt={class:"pos-line grand"},Jt={key:1,class:"pos-line"},Zt={key:2,class:"pos-line"},es={key:3,class:"pos-line"},ts={key:4,class:"pos-line"},ss={key:1,class:"small muted"},ns={key:2,class:"center small muted",style:{"margin-top":"4px"}},ls={key:1,class:"text-muted"},us={__name:"InvoiceView",setup(os){const W=ie(),X=ue(),q=oe(null),l=h(()=>x.invoices.find(a=>a.id===W.params.id)),g=h(()=>x.merchants.find(a=>a.id===l.value?.merchantId)),N=h(()=>x.customers.find(a=>a.id===l.value?.customerId)),D=h(()=>x.paymentTerms.find(a=>a.id===l.value?.paymentTermId)),V=h(()=>x.termsTemplates.find(a=>a.id===l.value?.termsTemplateId)),w=h(()=>x.shippingMethods.find(a=>a.id===l.value?.shippingMethodId));function C(a){return x.products.find(t=>t.id===a)}const O=h(()=>g.value?.addresses||[]),Y=h(()=>g.value?.contacts||[]),F=h(()=>O.value.find(a=>a.id===l.value?.merchantAddressId)||O.value[0]),f=h(()=>Y.value.find(a=>a.id===l.value?.merchantContactId)||Y.value[0]),H=h(()=>N.value?.addresses||[]),Q=h(()=>N.value?.contacts||[]),B=h(()=>H.value.find(a=>a.id===l.value?.customerAddressId)||H.value[0]),_=h(()=>Q.value.find(a=>a.id===l.value?.customerContactId)||Q.value[0]);function M(a){const t=(Number(a.qty)||0)*(Number(a.unitPrice)||0),n=a.discountType||"none",d=Number(a.discountValue)||0,v=n==="percent"?t*d/100:n==="fixed"?(Number(a.qty)||0)*d:0;return Math.max(0,t-v)}const c=h(()=>{const a=l.value;if(!a)return{sub:0,tax:0,shipping:0,total:0};let t=0,n=0;for(const v of a.items||[]){const r=M(v);t+=r;const m=x.taxes.find(k=>k.id===v.taxId);m&&(n+=r*(Number(m.rate)||0)/100)}const d=Number(a.shippingFree?0:a.shippingAmount??a.shippingFee??0);return{sub:t,tax:n,shipping:d,total:t+n+d}});function K(a,t){const[n,d,v]=String(a||"").split("-").map(Number),r=new Date(n||0,(d||1)-1,v||1);r.setDate(r.getDate()+(Number(t)||0));const m=r.getFullYear(),k=String(r.getMonth()+1).padStart(2,"0"),b=String(r.getDate()).padStart(2,"0");return`${m}-${k}-${b}`}function G(a,t){const[n,d,v]=String(a||"").split("-").map(Number),r=new Date(n||0,(d||1)-1,v||1),m=new Date(r.getFullYear(),r.getMonth()+1,1),k=new Date(m.getFullYear(),m.getMonth()+1,0).getDate();m.setDate(Math.min(Number(t)||1,k));const b=m.getFullYear(),T=String(m.getMonth()+1).padStart(2,"0"),A=String(m.getDate()).padStart(2,"0");return`${b}-${T}-${A}`}const P=h(()=>{const a=l.value,t=D.value;if(!a||!t||a.paidInFull)return[];const n=c.value.total,d=(t.schedule||[]).slice().sort((r,m)=>(r.sequence||0)-(m.sequence||0));let v=n;return d.map((r,m)=>{const k=r.dateType==="day_of_month"?G(a.date,r.dayOfMonth||1):K(a.date,r.days||0);let b=r.valueType==="percent"?n*(Number(r.valueAmount)||0)/100:Number(r.valueAmount)||0;return m===d.length-1&&(b=v),v=Math.max(0,v-b),[r.description||`Installment ${m+1}`,k,b]})}),J=h(()=>(x.creditNotes||[]).filter(a=>a.originalInvoiceId===l.value?.id&&(a.status==="issued"||a.status==="applied")));function Z(a){return(a.items||[]).reduce((n,d)=>{const v=(Number(d.qty)||0)*(Number(d.unitPrice)||0),r=d.discountType||"none",m=Number(d.discountValue)||0,k=r==="percent"?v*m/100:r==="fixed"?(Number(d.qty)||0)*m:0,b=Math.max(0,v-k),T=(()=>{const A=x.taxes.find(E=>E.id===d.taxId);return A?b*(Number(A.rate)||0)/100:0})();return n+b+T},0)}const y=h(()=>J.value.reduce((a,t)=>a+Z(t),0));function ee(){if(!q?.value)return;const a=q.value.outerHTML,t=document.createElement("iframe");t.style.position="fixed",t.style.right="0",t.style.bottom="0",t.style.width="0",t.style.height="0",t.style.border="0",document.body.appendChild(t);const n=t.contentDocument||t.contentWindow?.document;if(!n){document.body.removeChild(t);return}n.open(),n.write(`
    <html>
      <head>
        <meta charset="utf-8"/>
        <title>${l.value?.number||"Invoice"}</title>
        <link rel="stylesheet" href="https://bootswatch.com/5/pulse/bootstrap.min.css"/>
        <style>
          @page { size: A4; margin: 10mm; }
          html, body { margin: 0; padding: 0; background: #fff; -webkit-print-color-adjust: exact; print-color-adjust: exact; }
          /* Keep content within the printable area (190mm after margins) */
          .print-area { width: auto; max-width: 190mm; margin: 0 auto; border: none; }
          .print-area h4 { font-size: 20px; color: #4a148c; }
          .print-area table { font-size: 12px; }
          /* Match the detail view styling */
          .table td, .table th { vertical-align: middle; }
          .info-block { border: 1px solid rgba(0,0,0,.08); border-radius: .5rem; padding: .5rem .75rem; background: #fafafa; }
          .muted-label { font-size: .72rem; letter-spacing: .08em; color: #6c757d; }
          .totals-card { border: 1px solid rgba(0,0,0,.08); border-radius: .5rem; padding: .5rem .75rem; min-width: 160px; }
          .totals-card .line { display: flex; justify-content: space-between; }
          .totals-card .grand { font-weight: 700; }
        </style>
      </head>
      <body>${a}</body>
    </html>
  `),n.close();const d=t.contentWindow,v=()=>setTimeout(()=>{document.body.removeChild(t)},0),r=()=>{try{d.focus(),d.print()}finally{v()}};n.readyState==="complete"?setTimeout(r,150):d.addEventListener("load",()=>setTimeout(r,150))}function te(){document.body.classList.add("pos-print");const a=()=>document.body.classList.remove("pos-print");window.addEventListener("afterprint",a,{once:!0}),setTimeout(()=>{try{window.print()}finally{setTimeout(a,1200)}},50)}async function se(){if(!l.value)return;async function a(){return window.pdfMake||(await new Promise((p,L)=>{const I=document.createElement("script");I.src="https://cdn.jsdelivr.net/npm/pdfmake@0.2.10/build/pdfmake.min.js",I.onload=p,I.onerror=L,document.body.appendChild(I)}),await new Promise((p,L)=>{const I=document.createElement("script");I.src="https://cdn.jsdelivr.net/npm/pdfmake@0.2.10/build/vfs_fonts.min.js",I.onload=p,I.onerror=L,document.body.appendChild(I)})),window.pdfMake}await a();const t=l.value,n=g.value,d=N.value;function v(p){return(p.discountType||"none")==="percent"?`-${Number(p.discountValue||0).toFixed(0)}%`:(p.discountType||"none")==="fixed"?`- ${(Number(p.discountValue||0)*Number(p.qty||0)).toFixed(2)}`:"—"}const r=[[{text:"Product / Description",bold:!0},{text:"Qty",alignment:"right",bold:!0},{text:"Unit",alignment:"right",bold:!0},{text:"Discount",alignment:"right",bold:!0},{text:"Line",alignment:"right",bold:!0}],...(t.items||[]).map(p=>[C(p.productId)?.name||p.description||"—",{text:String(p.qty||0),alignment:"right"},{text:Number(p.unitPrice||0).toFixed(2),alignment:"right"},{text:v(p),alignment:"right"},{text:M(p).toFixed(2),alignment:"right"}])],m=[{text:`Subtotal: ${c.value.sub.toFixed(2)}`},{text:`Tax: ${c.value.tax.toFixed(2)}`}],k=!!t.shippingFree;Number(t.shippingAmount??t.shippingFee??0),k?m.push({text:"Shipping: 0.00 (free)",color:"#6c757d"}):m.push({text:`Shipping: ${c.value.shipping.toFixed(2)}`}),m.push({text:`Total: ${c.value.total.toFixed(2)}`,bold:!0});const b=Number(y.value||0);b>0&&m.push({text:`Credits: -${b.toFixed(2)}`});const T=Number(t.receivedAmount||0),A=Number(t.changeAmount||0);T>0&&m.push({text:`Received: ${T.toFixed(2)}`}),A>0&&m.push({text:`Change: ${A.toFixed(2)}`});const E=Math.max(0,c.value.total-b-T);(T>0||b>0||t.paidInFull)&&m.push({text:`Balance Due: ${E.toFixed(2)}`,bold:!0}),w.value?.name&&m.push({text:`Shipping via ${w.value.name}`,color:"#6c757d",fontSize:9,margin:[0,4,0,0]});const z=[{columns:[[{text:n?.name||"",bold:!0,fontSize:12},n?.addresses?.length?{text:`${n.addresses[0].line1}, ${n.addresses[0].city}`}:{},n?.taxId?{text:`VAT/TAX ID: ${n.taxId}`,color:"#6c757d",fontSize:9}:{},f.value?{text:`${f.value.name||""}${f.value.email?" · "+f.value.email:""}${f.value.phone?" · "+f.value.phone:""}`,color:"#6c757d",fontSize:9}:{}],{width:"auto",alignment:"right",stack:[{text:"Invoice",style:"title"},{text:`No: ${t.number}`,bold:!0},{text:`Date: ${t.date}`},{text:`Due: ${t.dueDate}`}]}]},{text:" ",margin:[0,6]},{text:"BILL TO",color:"#6c757d",fontSize:9,letterSpacing:.5},{text:d?.name||"",bold:!0},d?.addresses?.length?{text:`${d.addresses[0].line1}, ${d.addresses[0].city}`}:{},d?.taxId?{text:`VAT/TAX ID: ${d.taxId}`,color:"#6c757d",fontSize:9}:{},_.value?{text:`${_.value.name||""}${_.value.email?" · "+_.value.email:""}${_.value.phone?" · "+_.value.phone:""}`,color:"#6c757d",fontSize:9}:{},{text:" ",margin:[0,6]},{table:{headerRows:1,widths:["*",40,50,55,60],body:r},layout:"lightHorizontalLines"},{columns:[{text:" "},{width:200,alignment:"right",stack:m}],margin:[0,8,0,0]}];D.value&&!t.paidInFull&&(P.value||[]).length&&z.push({text:" ",margin:[0,6]},{text:`Payment Schedule — ${D.value.name}`,bold:!0},{table:{headerRows:1,widths:["*",80,70],body:[[{text:"Installment",bold:!0},{text:"Date",bold:!0},{text:"Amount",bold:!0,alignment:"right"}],...P.value.map(p=>[p[0],p[1],{text:Number(p[2]).toFixed(2),alignment:"right"}])]},layout:"lightHorizontalLines",margin:[0,4,0,0]}),(V.value?.content||"").trim()&&z.push({text:" ",margin:[0,8]},{text:"Terms",bold:!0},{text:V.value.content,margin:[0,2,0,0]}),(t.notes||"").trim()&&z.push({text:" ",margin:[0,6]},{text:"Notes",bold:!0},{text:t.notes,margin:[0,2,0,0]});const le={pageSize:"A4",pageMargins:[28,28,28,28],content:z,footer:(p,L)=>({margin:[28,8,28,16],fontSize:9,text:x.settings?.invoice?.footerText||""}),styles:{title:{fontSize:18,color:"#4a148c",bold:!0}},defaultStyle:{fontSize:10}};window.pdfMake.createPdf(le).download(`invoice_${t.number||"view"}.pdf`)}function ne(){l.value&&X.push(`/invoices/${l.value.id}/edit`)}return(a,t)=>l.value?(i(),o("div",re,[e("div",me,[ae(de,{title:`Invoice ${l.value.number}`},{actions:U(()=>[e("div",ce,[e("button",{class:"btn btn-outline-secondary",onClick:ne},"Edit"),e("button",{class:"btn btn-outline-secondary",onClick:ee},"Print"),e("button",{class:"btn btn-outline-secondary",onClick:te},"Receipt"),e("button",{class:"btn btn-outline-secondary",onClick:t[0]||(t[0]=()=>S(X).push(`/credit-notes/new?invoiceId=${l.value.id}`))},"New Credit Note"),e("button",{class:"btn btn-primary",onClick:se},"Download PDF")])]),default:U(()=>[e("div",{class:"print-area",ref_key:"printRef",ref:q},[e("div",pe,[e("div",null,[e("strong",null,s(g.value?.name),1),t[1]||(t[1]=e("br",null,null,-1)),F.value?(i(),o("span",ve,s(F.value.line1)+", "+s(F.value.city),1)):u("",!0),F.value?(i(),o("br",he)):u("",!0),g.value?.taxId?(i(),o("span",xe,"VAT/TAX ID: "+s(g.value.taxId),1)):u("",!0),g.value?.taxId?(i(),o("br",be)):u("",!0),f.value?(i(),o("span",ge,[j(s(f.value.name),1),f.value.email?(i(),o("span",ye," · "+s(f.value.email),1)):u("",!0),f.value.phone?(i(),o("span",fe," · "+s(f.value.phone),1)):u("",!0)])):u("",!0)]),e("div",_e,[t[2]||(t[2]=e("h4",{class:"mb-1"},"Invoice",-1)),e("div",null,[e("strong",null,"No: "+s(l.value.number),1)]),e("div",null,"Date: "+s(l.value.date),1),e("div",null,"Due: "+s(l.value.dueDate),1)])]),e("div",ke,[t[3]||(t[3]=e("div",{class:"text-uppercase muted-label"},"Bill To",-1)),e("div",Ne,s(N.value?.name),1),B.value?(i(),o("div",Fe,s(B.value.line1)+", "+s(B.value.city),1)):u("",!0),N.value?.taxId?(i(),o("div",Ie,"VAT/TAX ID: "+s(N.value.taxId),1)):u("",!0),_.value?(i(),o("div",we,[j(s(_.value.name),1),_.value.email?(i(),o("span",Te," · "+s(_.value.email),1)):u("",!0),_.value.phone?(i(),o("span",Ae," · "+s(_.value.phone),1)):u("",!0)])):u("",!0)]),e("table",Se,[t[4]||(t[4]=e("thead",{class:"table-light"},[e("tr",null,[e("th",null,"Product / Description"),e("th",{class:"text-end"},"Qty"),e("th",{class:"text-end"},"Unit"),e("th",{class:"text-end"},"Discount"),e("th",{class:"text-end"},"Line")])],-1)),e("tbody",null,[(i(!0),o($,null,R(l.value.items,n=>(i(),o("tr",{key:n.id},[e("td",null,[e("div",$e,s(C(n.productId)?.name||n.description||"—"),1),n.description&&C(n.productId)?.name!==n.description?(i(),o("div",De,s(n.description),1)):u("",!0)]),e("td",Ce,s(n.qty),1),e("td",Me,s(Number(n.unitPrice||0).toFixed(2)),1),e("td",Ve,[(n.discountType||"none")==="percent"?(i(),o("span",Pe,"-"+s(Number(n.discountValue||0).toFixed(0))+"%",1)):(n.discountType||"none")==="fixed"?(i(),o("span",ze,"-"+s((Number(n.discountValue||0)*Number(n.qty||0)).toFixed(2)),1)):(i(),o("span",Le,"—"))]),e("td",Re,s(M(n).toFixed(2)),1)]))),128))])]),e("div",qe,[t[14]||(t[14]=e("div",{class:"flex-grow-1"},null,-1)),e("div",Be,[e("div",Ee,[t[5]||(t[5]=e("span",null,"Subtotal",-1)),e("span",null,s(c.value.sub.toFixed(2)),1)]),e("div",je,[t[6]||(t[6]=e("span",null,"Tax",-1)),e("span",null,s(c.value.tax.toFixed(2)),1)]),e("div",Xe,[t[8]||(t[8]=e("span",null,"Shipping",-1)),e("span",null,[l.value.shippingFree?(i(),o($,{key:0},[e("span",Oe,s(Number(l.value.shippingAmount||0).toFixed(2)),1),t[7]||(t[7]=e("span",{class:"ms-1"},"0.00",-1))],64)):(i(),o($,{key:1},[j(s(c.value.shipping.toFixed(2)),1)],64))])]),e("div",Ye,[t[9]||(t[9]=e("span",null,"Total",-1)),e("span",null,s(c.value.total.toFixed(2)),1)]),y.value>0?(i(),o("div",He,[t[10]||(t[10]=e("span",null,"Credits",-1)),e("span",null,"-"+s(y.value.toFixed(2)),1)])):u("",!0),l.value.paidInFull||Number(l.value.receivedAmount||0)>0?(i(),o("div",Qe,[t[11]||(t[11]=e("span",null,"Received",-1)),e("span",null,s(Number(l.value.receivedAmount||0).toFixed(2)),1)])):u("",!0),Number(l.value.changeAmount||0)>0?(i(),o("div",Ue,[t[12]||(t[12]=e("span",null,"Change",-1)),e("span",null,s(Number(l.value.changeAmount||0).toFixed(2)),1)])):u("",!0),l.value.paidInFull||Number(l.value.receivedAmount||0)>0||y.value>0?(i(),o("div",We,[t[13]||(t[13]=e("span",{class:"fw-semibold"},"Balance Due",-1)),e("span",Ke,s(Math.max(0,c.value.total-y.value-Number(l.value.receivedAmount||0)).toFixed(2)),1)])):u("",!0),w.value?(i(),o("div",Ge," Shipping via "+s(w.value?.name),1)):u("",!0)])]),D.value&&!l.value.paidInFull&&P.value.length?(i(),o("div",Je,[e("strong",null,"Payment Schedule — "+s(D.value?.name),1),e("table",Ze,[t[15]||(t[15]=e("thead",{class:"table-light"},[e("tr",null,[e("th",null,"Installment"),e("th",null,"Date"),e("th",{class:"text-end"},"Amount")])],-1)),e("tbody",null,[(i(!0),o($,null,R(P.value,n=>(i(),o("tr",{key:n[0]+n[1]},[e("td",null,s(n[0]),1),e("td",null,s(n[1]),1),e("td",et,s(Number(n[2]).toFixed(2)),1)]))),128))])])])):u("",!0),V.value?.content?(i(),o("div",tt,[t[16]||(t[16]=e("strong",null,"Terms",-1)),e("div",st,s(V.value.content),1)])):u("",!0),S(x).settings?.invoice?.footerText?(i(),o("div",nt,s(S(x).settings.invoice.footerText),1)):u("",!0),l.value.notes?(i(),o("div",lt,[t[17]||(t[17]=e("strong",null,"Notes",-1)),e("div",ot,s(l.value.notes),1)])):u("",!0)],512),e("div",it,[e("div",at,[e("div",ut,s(g.value?.name),1),F.value?(i(),o("div",dt,s(F.value.line1)+", "+s(F.value.city),1)):u("",!0),g.value?.taxId?(i(),o("div",rt,"VAT/TAX: "+s(g.value.taxId),1)):u("",!0)]),t[31]||(t[31]=e("hr",{class:"pos-hr"},null,-1)),t[32]||(t[32]=e("div",{class:"center title"},"TAX INVOICE",-1)),e("div",mt,[t[18]||(t[18]=e("span",null,"No:",-1)),e("span",null,s(l.value?.number),1)]),e("div",ct,[t[19]||(t[19]=e("span",null,"Date:",-1)),e("span",null,s(l.value?.date),1)]),N.value?.name?(i(),o("div",pt,[t[20]||(t[20]=e("span",null,"Customer:",-1)),e("span",null,s(N.value.name),1)])):u("",!0),t[33]||(t[33]=e("hr",{class:"pos-hr"},null,-1)),e("table",vt,[t[22]||(t[22]=e("thead",null,[e("tr",null,[e("th",{class:"sl"},"SL"),e("th",null,"Item Description"),e("th",{class:"amt"},"Amount")])],-1)),e("tbody",null,[(i(!0),o($,null,R(l.value.items,(n,d)=>(i(),o("tr",{key:n.id},[e("td",ht,s(String(d+1).padStart(2,"0")),1),e("td",xt,[e("div",bt,s(C(n.productId)?.name||n.description||"—"),1),e("div",gt,s(Number(n.qty||0))+" x "+s(Number(n.unitPrice||0).toFixed(2)),1)]),e("td",yt,s(M(n).toFixed(2)),1)]))),128)),!l.value.items||!l.value.items.length?(i(),o("tr",ft,[...t[21]||(t[21]=[e("td",{colspan:"3",class:"small muted"},"No items",-1)])])):u("",!0)])]),t[34]||(t[34]=e("hr",{class:"pos-hr"},null,-1)),e("div",_t,[e("div",kt,[t[23]||(t[23]=e("span",null,"Subtotal",-1)),e("span",null,s(c.value.sub.toFixed(2)),1)]),e("div",Nt,[t[24]||(t[24]=e("span",null,"VAT",-1)),e("span",null,s(c.value.tax.toFixed(2)),1)]),c.value.shipping>0?(i(),o("div",Ft,[t[25]||(t[25]=e("span",null,"Shipping",-1)),e("span",null,s(c.value.shipping.toFixed(2)),1)])):u("",!0),e("div",It,[t[26]||(t[26]=e("span",null,"Net Amount",-1)),e("span",null,s(c.value.total.toFixed(2)),1)]),y.value>0?(i(),o("div",wt,[t[27]||(t[27]=e("span",null,"Credits",-1)),e("span",null,"-"+s(y.value.toFixed(2)),1)])):u("",!0),l.value.paidInFull||Number(l.value.receivedAmount||0)>0?(i(),o("div",Tt,[t[28]||(t[28]=e("span",null,"Received",-1)),e("span",null,s(Number(l.value.receivedAmount||0).toFixed(2)),1)])):u("",!0),Number(l.value.changeAmount||0)>0?(i(),o("div",At,[t[29]||(t[29]=e("span",null,"Change",-1)),e("span",null,s(Number(l.value.changeAmount||0).toFixed(2)),1)])):u("",!0),l.value.paidInFull||Number(l.value.receivedAmount||0)>0||y.value>0?(i(),o("div",St,[t[30]||(t[30]=e("span",null,"Balance",-1)),e("span",null,s(Math.max(0,c.value.total-y.value-Number(l.value.receivedAmount||0)).toFixed(2)),1)])):u("",!0)]),t[35]||(t[35]=e("hr",{class:"pos-hr"},null,-1)),w.value?(i(),o("div",$t,"Shipping via "+s(w.value?.name),1)):u("",!0),t[36]||(t[36]=e("div",{class:"small muted"},"Prices inclusive of VAT where applicable.",-1)),S(x).settings?.invoice?.footerText?(i(),o("div",Dt,s(S(x).settings.invoice.footerText),1)):u("",!0),t[37]||(t[37]=e("div",{class:"center small",style:{"margin-top":"6px"}},"Thank you!",-1))]),e("div",Ct,[e("div",Mt,[e("div",Vt,s(g.value?.name),1),F.value?(i(),o("div",Pt,s(F.value.line1)+", "+s(F.value.city),1)):u("",!0),g.value?.taxId?(i(),o("div",zt,"VAT/TAX: "+s(g.value.taxId),1)):u("",!0)]),t[51]||(t[51]=e("hr",{class:"pos-hr"},null,-1)),t[52]||(t[52]=e("div",{class:"center title"},"TAX INVOICE",-1)),e("div",Lt,[t[38]||(t[38]=e("span",null,"No:",-1)),e("span",null,s(l.value?.number),1)]),e("div",Rt,[t[39]||(t[39]=e("span",null,"Date:",-1)),e("span",null,s(l.value?.date),1)]),N.value?.name?(i(),o("div",qt,[t[40]||(t[40]=e("span",null,"Customer:",-1)),e("span",null,s(N.value.name),1)])):u("",!0),t[53]||(t[53]=e("hr",{class:"pos-hr"},null,-1)),e("table",Bt,[t[42]||(t[42]=e("thead",null,[e("tr",null,[e("th",{class:"sl"},"SL"),e("th",null,"Item Description"),e("th",{class:"amt"},"Amount")])],-1)),e("tbody",null,[(i(!0),o($,null,R(l.value.items,(n,d)=>(i(),o("tr",{key:n.id},[e("td",Et,s(String(d+1).padStart(2,"0")),1),e("td",jt,[e("div",Xt,s(C(n.productId)?.name||n.description||"—"),1),e("div",Ot,s(Number(n.qty||0))+" x "+s(Number(n.unitPrice||0).toFixed(2)),1)]),e("td",Yt,s(M(n).toFixed(2)),1)]))),128)),!l.value.items||!l.value.items.length?(i(),o("tr",Ht,[...t[41]||(t[41]=[e("td",{colspan:"3",class:"small muted"},"No items",-1)])])):u("",!0)])]),t[54]||(t[54]=e("hr",{class:"pos-hr"},null,-1)),e("div",Qt,[e("div",Ut,[t[43]||(t[43]=e("span",null,"Subtotal",-1)),e("span",null,s(c.value.sub.toFixed(2)),1)]),e("div",Wt,[t[44]||(t[44]=e("span",null,"VAT",-1)),e("span",null,s(c.value.tax.toFixed(2)),1)]),c.value.shipping>0?(i(),o("div",Kt,[t[45]||(t[45]=e("span",null,"Shipping",-1)),e("span",null,s(c.value.shipping.toFixed(2)),1)])):u("",!0),e("div",Gt,[t[46]||(t[46]=e("span",null,"Net Amount",-1)),e("span",null,s(c.value.total.toFixed(2)),1)]),y.value>0?(i(),o("div",Jt,[t[47]||(t[47]=e("span",null,"Credits",-1)),e("span",null,"-"+s(y.value.toFixed(2)),1)])):u("",!0),l.value.paidInFull||Number(l.value.receivedAmount||0)>0?(i(),o("div",Zt,[t[48]||(t[48]=e("span",null,"Received",-1)),e("span",null,s(Number(l.value.receivedAmount||0).toFixed(2)),1)])):u("",!0),Number(l.value.changeAmount||0)>0?(i(),o("div",es,[t[49]||(t[49]=e("span",null,"Change",-1)),e("span",null,s(Number(l.value.changeAmount||0).toFixed(2)),1)])):u("",!0),l.value.paidInFull||Number(l.value.receivedAmount||0)>0||y.value>0?(i(),o("div",ts,[t[50]||(t[50]=e("span",null,"Balance",-1)),e("span",null,s(Math.max(0,c.value.total-y.value-Number(l.value.receivedAmount||0)).toFixed(2)),1)])):u("",!0)]),t[55]||(t[55]=e("hr",{class:"pos-hr"},null,-1)),w.value?(i(),o("div",ss,"Shipping via "+s(w.value?.name),1)):u("",!0),t[56]||(t[56]=e("div",{class:"small muted"},"Prices inclusive of VAT where applicable.",-1)),S(x).settings?.invoice?.footerText?(i(),o("div",ns,s(S(x).settings.invoice.footerText),1)):u("",!0),t[57]||(t[57]=e("div",{class:"center small",style:{"margin-top":"6px"}},"Thank you!",-1))])]),_:1},8,["title"])])])):(i(),o("div",ls,"Invoice not found."))}};export{us as default};
