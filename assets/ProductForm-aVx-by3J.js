import{u as D,v as E,r as I,A as O,b as w,d as n,o as a,e as t,p as B,l as P,y as r,z as d,F as c,g as p,t as u,B as m,j as T,m as U}from"./vendor-BvFxYDzW.js";import{S as j}from"./SectionCard-lIjXfEoU.js";import{s as b,u as z,a as F,b as J}from"./index-B1P3bt3z.js";const M={class:"row g-3 justify-content-center"},R={class:"col-12 col-lg-8 col-xl-6"},W={class:"row g-3"},Y={class:"col-12"},q={class:"col-md-4"},A=["value"],L={class:"col-md-4"},G=["value"],H={class:"col-md-4"},K={class:"col-md-4"},Q=["value"],X={class:"col-md-4"},Z={class:"input-group input-group-sm"},$={key:0,class:"input-group-text"},h={key:1,class:"input-group-text"},ee={class:"col-md-4"},te=["value"],se={class:"col-12"},re={__name:"ProductForm",setup(oe){const v=D(),y=E(),i=J(),f=v.path.endsWith("/edit"),g=f?v.params.id:null,V=[{value:"pcs",label:"Pcs (Pieces)"},{value:"ea",label:"Each (Ea)"},{value:"units",label:"Units"},{value:"items",label:"Items"},{value:"doz",label:"Dozen (Doz)"},{value:"pair",label:"Pair"},{value:"set",label:"Set"},{value:"pack",label:"Pack"},{value:"box",label:"Box"},{value:"carton",label:"Carton"}],x=["goods","service","digital","rental/lease","subscription","fee","license","expense","material","labor"],_=["none","fixed","percent"],o=I({id:"",name:"",unit:V[0].value,type:x[0],price:0,discountType:"none",discountValue:0,taxId:"",description:""});O(()=>{if(f&&g){const l=b.products.find(e=>e.id===g);l&&Object.assign(o,JSON.parse(JSON.stringify(l)))}});const S=w(()=>o.discountType==="percent");function N(){var l;return(l=o.name)!=null&&l.trim()?o.price<0?(i.error("Validation Error","Price must be 0 or greater"),!1):o.discountType==="percent"&&o.discountValue>100?(i.error("Validation Error","Discount percent cannot exceed 100%"),!1):o.discountValue<0?(i.error("Validation Error","Discount value must be 0 or greater"),!1):!0:(i.error("Validation Error","Product name is required"),!1)}function k(){y.push("/products")}function C(){if(!N())return;o.id||(o.id=z("prd_"));const l=JSON.parse(JSON.stringify(o));F(b.products,l),i.success("Saved","Product saved successfully"),y.push("/products")}return(l,e)=>(a(),n("div",M,[t("div",R,[B(j,{title:U(f)?"Edit Product":"New Product"},{actions:P(()=>[t("button",{class:"btn btn-sm btn-outline-secondary",type:"button",onClick:k},"Back to list")]),default:P(()=>[t("div",W,[t("div",Y,[e[8]||(e[8]=t("label",{class:"form-label"},"Name",-1)),r(t("input",{class:"form-control form-control-sm","onUpdate:modelValue":e[0]||(e[0]=s=>o.name=s),placeholder:"e.g., Web design"},null,512),[[d,o.name]])]),t("div",q,[e[9]||(e[9]=t("label",{class:"form-label"},"Unit",-1)),r(t("select",{class:"form-select form-select-sm","onUpdate:modelValue":e[1]||(e[1]=s=>o.unit=s)},[(a(),n(c,null,p(V,s=>t("option",{key:s.value,value:s.value},u(s.label),9,A)),64))],512),[[m,o.unit]])]),t("div",L,[e[10]||(e[10]=t("label",{class:"form-label"},"Type",-1)),r(t("select",{class:"form-select form-select-sm","onUpdate:modelValue":e[2]||(e[2]=s=>o.type=s)},[(a(),n(c,null,p(x,s=>t("option",{key:s,value:s},u(s[0].toUpperCase()+s.slice(1)),9,G)),64))],512),[[m,o.type]])]),t("div",H,[e[11]||(e[11]=t("label",{class:"form-label"},"Price",-1)),r(t("input",{class:"form-control form-control-sm text-end",type:"number",min:"0",step:"0.01","onUpdate:modelValue":e[3]||(e[3]=s=>o.price=s)},null,512),[[d,o.price,void 0,{number:!0}]])]),t("div",K,[e[12]||(e[12]=t("label",{class:"form-label"},"Discount Type",-1)),r(t("select",{class:"form-select form-select-sm","onUpdate:modelValue":e[4]||(e[4]=s=>o.discountType=s)},[(a(),n(c,null,p(_,s=>t("option",{key:s,value:s},u(s[0].toUpperCase()+s.slice(1)),9,Q)),64))],512),[[m,o.discountType]])]),t("div",X,[e[13]||(e[13]=t("label",{class:"form-label"},"Discount Value",-1)),t("div",Z,[S.value?T("",!0):(a(),n("span",$,"à§³")),r(t("input",{class:"form-control",type:"number",min:"0",step:"0.01","onUpdate:modelValue":e[5]||(e[5]=s=>o.discountValue=s)},null,512),[[d,o.discountValue,void 0,{number:!0}]]),S.value?(a(),n("span",h,"%")):T("",!0)])]),t("div",ee,[e[15]||(e[15]=t("label",{class:"form-label"},"Default Tax",-1)),r(t("select",{class:"form-select form-select-sm","onUpdate:modelValue":e[6]||(e[6]=s=>o.taxId=s)},[e[14]||(e[14]=t("option",{value:""},"None",-1)),(a(!0),n(c,null,p(U(b).taxes,s=>(a(),n("option",{key:s.id,value:s.id},u(s.name)+" ("+u(s.rate)+"%)",9,te))),128))],512),[[m,o.taxId]])]),t("div",se,[e[16]||(e[16]=t("label",{class:"form-label"},"Description",-1)),r(t("textarea",{class:"form-control",rows:"2","onUpdate:modelValue":e[7]||(e[7]=s=>o.description=s),placeholder:"Optional"},null,512),[[d,o.description]])])]),t("div",{class:"d-flex justify-content-end gap-2 mt-2"},[t("button",{class:"btn btn-outline-secondary",onClick:k,type:"button"},"Cancel"),t("button",{class:"btn btn-primary",onClick:C,type:"button"},"Save")])]),_:1},8,["title"])])]))}};export{re as default};
