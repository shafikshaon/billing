import{v as q,b as f,d as c,e as r,o as u,f as t,p as B,l as V,j as E,t as a,F as $,g as j,m as z,n as Q,x as I,y as R,A as U}from"./vendor-iuljl24U.js";import{S as Z}from"./SectionCard-Cl3nWDUi.js";import{s as y}from"./index-FBZ1k241.js";const G={class:"row g-3"},H={class:"col-12"},J={class:"d-flex gap-2"},K={class:"search-bar"},O={key:0,class:"empty-state"},W={class:"empty-state-title"},X={class:"empty-state-description"},Y={key:0,class:"empty-state-action"},tt={class:"table-wrapper"},et={class:"table table-sm align-middle"},st={class:"fw-medium"},ot={class:"text-end"},nt={class:"text-end"},at={class:"btn-group btn-group-sm"},lt=["onClick"],it=["onClick"],rt={class:"table-footer"},ut={class:"small text-muted"},dt={class:"btn-group btn-group-sm"},ct=["disabled"],mt=["disabled"],x=10,yt={__name:"InvoicesList",setup(vt){const h=q(),m=f(""),v=f(!0),p=f("all"),i=f(1);function T(n){return n.items.reduce((s,o)=>{const l=(Number(o.qty)||0)*(Number(o.unitPrice)||0),d=o.discountType||"none",b=Number(o.discountValue)||0,P=d==="percent"?l*b/100:d==="fixed"?(Number(o.qty)||0)*b:0,N=Math.max(0,l-P),D=(()=>{const S=y.taxes.find(F=>F.id===o.taxId);return S?N*(Number(S.rate)||0)/100:0})();return s+N+D},0)+Number(n.shippingFee||0)}const C=c(()=>{const n=m.value.trim().toLowerCase();let e=y.invoices.slice();return p.value!=="all"&&(e=e.filter(s=>(s.status||"draft")===p.value)),n&&(e=e.filter(s=>{var o,l,d;return((o=s.number)==null?void 0:o.toLowerCase().includes(n))||((d=(l=y.customers.find(b=>b.id===s.customerId))==null?void 0:l.name)==null?void 0:d.toLowerCase().includes(n))})),e.sort((s,o)=>v.value?(s.number||"").localeCompare(o.number||""):(o.number||"").localeCompare(s.number||"")),e}),_=c(()=>Math.max(1,Math.ceil(C.value.length/x))),k=c(()=>{const e=(Math.min(i.value,_.value)-1)*x;return C.value.slice(e,e+x)}),g=c(()=>m.value.trim().length>0),M=c(()=>k.value.length===0);function w(){h.push("/invoices/new")}function A(n){h.push(`/invoices/${n.id}`)}function L(n){h.push(`/invoices/${n.id}/edit`)}return(n,e)=>(u(),r("div",G,[t("div",H,[B(Z,{title:"Invoices"},{actions:V(()=>[t("div",J,[t("div",K,[e[5]||(e[5]=t("span",{class:"search-icon"},"ðŸ”",-1)),I(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>m.value=s),class:"form-control form-control-sm",placeholder:"Search invoices..."},null,512),[[R,m.value]])]),I(t("select",{class:"form-select form-select-sm",style:{"max-width":"140px"},"onUpdate:modelValue":e[1]||(e[1]=s=>p.value=s)},[...e[6]||(e[6]=[t("option",{value:"all"},"All",-1),t("option",{value:"draft"},"Draft",-1),t("option",{value:"sent"},"Sent",-1),t("option",{value:"paid"},"Paid",-1),t("option",{value:"void"},"Void",-1)])],512),[[U,p.value]]),t("button",{class:"btn btn-sm btn-outline-secondary",type:"button",onClick:e[2]||(e[2]=s=>v.value=!v.value)},"Sort "+a(v.value?"Aâ†’Z":"Zâ†’A"),1),t("button",{class:"btn btn-sm btn-primary",type:"button",onClick:w},"Create")])]),default:V(()=>[M.value?(u(),r("div",O,[e[7]||(e[7]=t("div",{class:"empty-state-icon"},"ðŸ§¾",-1)),t("div",W,a(g.value?"No invoices found":"No invoices yet"),1),t("div",X,a(g.value?"Try adjusting your search or filters to find what you're looking for.":"Get started by creating your first invoice to bill your customers."),1),g.value?E("",!0):(u(),r("div",Y,[t("button",{class:"btn btn-primary",onClick:w}," Create Invoice ")]))])):(u(),r($,{key:1},[t("div",tt,[t("table",et,[e[8]||(e[8]=t("thead",null,[t("tr",null,[t("th",null,"No"),t("th",null,"Date"),t("th",null,"Customer"),t("th",null,"Status"),t("th",{class:"text-end"},"Total (à§³)"),t("th",{class:"text-end"})])],-1)),t("tbody",null,[(u(!0),r($,null,j(k.value,s=>{var o;return u(),r("tr",{key:s.id},[t("td",st,a(s.number),1),t("td",null,a(s.date),1),t("td",null,a((o=z(y).customers.find(l=>l.id===s.customerId))==null?void 0:o.name),1),t("td",null,[t("span",{class:Q(["badge",`badge-${s.status||"draft"}`])},a(s.status||"draft"),3)]),t("td",ot,a(T(s).toFixed(2)),1),t("td",nt,[t("div",at,[t("button",{class:"btn btn-outline-secondary",onClick:l=>A(s)},"View",8,lt),t("button",{class:"btn btn-outline-secondary",onClick:l=>L(s)},"Edit",8,it)])])])}),128))])])]),t("div",rt,[t("div",ut,"Page "+a(i.value)+" of "+a(_.value),1),t("div",dt,[t("button",{class:"btn btn-outline-secondary",disabled:i.value<=1,onClick:e[3]||(e[3]=s=>i.value--)},"Prev",8,ct),t("button",{class:"btn btn-outline-secondary",disabled:i.value>=_.value,onClick:e[4]||(e[4]=s=>i.value++)},"Next",8,mt)])])],64))]),_:1})])]))}};export{yt as default};
