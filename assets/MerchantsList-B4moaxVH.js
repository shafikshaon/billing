import{r as m,e as h,s as f,c as r,o as u,a as t,b as N,w as k,f as B,g as M,F as S,h as V,t as o,i as A,v as D,j as I}from"./index-DaYuDLQb.js";import{S as L}from"./SectionCard-CHGy0F5-.js";const P={class:"row g-3"},j={class:"col-12"},z={class:"d-flex gap-2"},E={class:"table table-sm align-middle mb-2"},F={class:"fw-medium"},T={class:"badge text-bg-secondary text-capitalize"},Z={class:"text-end"},q={class:"btn-group btn-group-sm"},R=["onClick"],U=["onClick"],G=["onClick"],H={key:0},J={class:"d-flex justify-content-between align-items-center"},K={class:"small text-muted"},O={class:"btn-group btn-group-sm"},Q=["disabled"],W=["disabled"],p=8,et={__name:"MerchantsList",setup(X){const a=B(),d=m(""),c=m(!0),l=m(1),v=h(()=>{const n=d.value.trim().toLowerCase();let e=f.merchants.slice();return n&&(e=e.filter(s=>s.name?.toLowerCase().includes(n))),e.sort((s,i)=>{const g=(s.name||"").localeCompare(i.name||"");return c.value?g:-g}),e}),b=h(()=>Math.max(1,Math.ceil(v.value.length/p))),_=h(()=>{const e=(Math.min(l.value,b.value)-1)*p;return v.value.slice(e,e+p)});function y(){a.push("/merchants/new")}function C(){a.push("/merchants/bulk-import")}function x(n){a.push(`/merchants/${n.id}`)}function w(n){a.push(`/merchants/${n.id}/edit`)}function $(n){confirm(`Delete merchant "${n.name}"?`)&&I(f.merchants,n.id)}return(n,e)=>(u(),r("div",P,[t("div",j,[N(L,{title:"Merchants"},{actions:k(()=>[t("div",z,[A(t("input",{class:"form-control form-control-sm",placeholder:"Search...","onUpdate:modelValue":e[0]||(e[0]=s=>d.value=s)},null,512),[[D,d.value]]),t("button",{class:"btn btn-sm btn-outline-secondary",type:"button",onClick:e[1]||(e[1]=s=>c.value=!c.value)}," Sort "+o(c.value?"A→Z":"Z→A"),1),t("button",{class:"btn btn-sm btn-success",type:"button",onClick:C},"Bulk Import"),t("button",{class:"btn btn-sm btn-primary",type:"button",onClick:y},"New")])]),default:k(()=>[t("table",E,[e[5]||(e[5]=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"Name"),t("th",null,"Type"),t("th",null,"Addresses"),t("th",null,"Contacts"),t("th",{class:"text-end"})])],-1)),t("tbody",null,[(u(!0),r(S,null,V(_.value,s=>(u(),r("tr",{key:s.id},[t("td",F,o(s.name),1),t("td",null,[t("span",T,o(s.type),1)]),t("td",null,o(s.addresses?.length||0),1),t("td",null,o(s.contacts?.length||0),1),t("td",Z,[t("div",q,[t("button",{class:"btn btn-outline-secondary",onClick:i=>x(s)},"View",8,R),t("button",{class:"btn btn-outline-secondary",onClick:i=>w(s)},"Edit",8,U),t("button",{class:"btn btn-outline-danger",onClick:i=>$(s)},"Delete",8,G)])])]))),128)),_.value.length===0?(u(),r("tr",H,[...e[4]||(e[4]=[t("td",{colspan:"5",class:"text-muted"},"No merchants found.",-1)])])):M("",!0)])]),t("div",J,[t("div",K,"Page "+o(l.value)+" of "+o(b.value),1),t("div",O,[t("button",{class:"btn btn-outline-secondary",disabled:l.value<=1,onClick:e[2]||(e[2]=s=>l.value--)},"Prev",8,Q),t("button",{class:"btn btn-outline-secondary",disabled:l.value>=b.value,onClick:e[3]||(e[3]=s=>l.value++)},"Next",8,W)])])]),_:1})])]))}};export{et as default};
