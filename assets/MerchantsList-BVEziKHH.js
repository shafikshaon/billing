import{r as b,e as v,s as g,c,a as t,b as $,w as y,f as N,o as r,g as M,F as V,h as A,t as o,i as B,v as D,j as L}from"./index-CHdhSjhx.js";import{_ as S}from"./SectionCard-D4lkJobp.js";const P={class:"row g-3"},j={class:"col-12"},z={class:"d-flex gap-2"},E={class:"table table-sm align-middle mb-2"},F={class:"fw-medium"},I={class:"badge text-bg-secondary text-capitalize"},T={class:"text-end"},Z={class:"btn-group btn-group-sm"},q=["onClick"],R=["onClick"],U=["onClick"],G={key:0},H={class:"d-flex justify-content-between align-items-center"},J={class:"small text-muted"},K={class:"btn-group btn-group-sm"},O=["disabled"],Q=["disabled"],h=8,tt={__name:"MerchantsList",setup(W){const d=N(),u=b(""),a=b(!0),l=b(1),p=v(()=>{const n=u.value.trim().toLowerCase();let e=g.merchants.slice();return n&&(e=e.filter(s=>s.name?.toLowerCase().includes(n))),e.sort((s,i)=>{const f=(s.name||"").localeCompare(i.name||"");return a.value?f:-f}),e}),m=v(()=>Math.max(1,Math.ceil(p.value.length/h))),_=v(()=>{const e=(Math.min(l.value,m.value)-1)*h;return p.value.slice(e,e+h)});function C(){d.push("/merchants/new")}function k(n){d.push(`/merchants/${n.id}`)}function x(n){d.push(`/merchants/${n.id}/edit`)}function w(n){confirm(`Delete merchant "${n.name}"?`)&&L(g.merchants,n.id)}return(n,e)=>(r(),c("div",P,[t("div",j,[$(S,{title:"Merchants"},{actions:y(()=>[t("div",z,[B(t("input",{class:"form-control form-control-sm",placeholder:"Search...","onUpdate:modelValue":e[0]||(e[0]=s=>u.value=s)},null,512),[[D,u.value]]),t("button",{class:"btn btn-sm btn-outline-secondary",type:"button",onClick:e[1]||(e[1]=s=>a.value=!a.value)}," Sort "+o(a.value?"A→Z":"Z→A"),1),t("button",{class:"btn btn-sm btn-primary",type:"button",onClick:C},"New")])]),default:y(()=>[t("table",E,[e[5]||(e[5]=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"Name"),t("th",null,"Type"),t("th",null,"Addresses"),t("th",null,"Contacts"),t("th",{class:"text-end"})])],-1)),t("tbody",null,[(r(!0),c(V,null,A(_.value,s=>(r(),c("tr",{key:s.id},[t("td",F,o(s.name),1),t("td",null,[t("span",I,o(s.type),1)]),t("td",null,o(s.addresses?.length||0),1),t("td",null,o(s.contacts?.length||0),1),t("td",T,[t("div",Z,[t("button",{class:"btn btn-outline-secondary",onClick:i=>k(s)},"View",8,q),t("button",{class:"btn btn-outline-secondary",onClick:i=>x(s)},"Edit",8,R),t("button",{class:"btn btn-outline-danger",onClick:i=>w(s)},"Delete",8,U)])])]))),128)),_.value.length===0?(r(),c("tr",G,[...e[4]||(e[4]=[t("td",{colspan:"5",class:"text-muted"},"No merchants found.",-1)])])):M("",!0)])]),t("div",H,[t("div",J,"Page "+o(l.value)+" of "+o(m.value),1),t("div",K,[t("button",{class:"btn btn-outline-secondary",disabled:l.value<=1,onClick:e[2]||(e[2]=s=>l.value--)},"Prev",8,O),t("button",{class:"btn btn-outline-secondary",disabled:l.value>=m.value,onClick:e[3]||(e[3]=s=>l.value++)},"Next",8,Q)])])]),_:1})])]))}};export{tt as default};
