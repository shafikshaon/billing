import{j as w,k as F,n as p,l as T,s as g,c as r,o as u,a as e,b as O,w as D,u as N,e as k,h as l,v as a,m as d,F as S,g as h,t as A,p as E}from"./index-Bh5XxthV.js";import{S as C}from"./SectionCard-mLPpfrf6.js";const P={class:"row g-3 justify-content-center"},I={class:"col-12 col-lg-8 col-xl-7"},M={class:"row g-3"},L={class:"col-md-7"},Y={class:"col-md-5"},j={class:"col-12"},q={class:"col-12"},B={class:"table-responsive"},G={class:"table table-sm align-middle"},J=["onUpdate:modelValue"],_=["onUpdate:modelValue"],R=["onUpdate:modelValue"],W=["onUpdate:modelValue"],$=["onUpdate:modelValue"],z=["onUpdate:modelValue"],H={class:"text-end"},K=["onClick"],Q={class:"col-12"},X={class:"row g-2"},Z={class:"col-md-4"},ee={class:"col-md-4"},te={class:"col-md-4"},se={class:"col-md-4"},oe={class:"col-md-4"},le={class:"col-md-4"},ne={class:"col-md-4"},ae={class:"col-md-4"},de={class:"col-md-4"},me={__name:"PaymentTermForm",setup(ie){const c=w(),y=k(),m=c.path.endsWith("/edit"),f=m?c.params.id:null,o=F({id:"",name:"",description:"",active:!0,sequence:0,settings:{earlyDiscountEnabled:!1,earlyDiscountPercent:0,earlyDiscountDays:0,showInstallmentDates:!0,showOnInvoice:!0,lateFeeEnabled:!1,lateFeeType:"percent",lateFeeAmount:0,lateFeeGraceDays:0},schedule:[{id:p("ptl_"),sequence:1,valueType:"percent",valueAmount:100,dateType:"days_after",days:0,dayOfMonth:null,description:"Due on receipt"}]});T(()=>{if(m&&f){const i=g.paymentTerms.find(t=>t.id===f);i&&Object.assign(o,JSON.parse(JSON.stringify(i)))}});function V(){o.schedule.push({id:p("ptl_"),sequence:o.schedule.length+1,valueType:"percent",valueAmount:50,dateType:"days_after",days:30,dayOfMonth:null,description:""})}function x(i){o.schedule.splice(i,1),o.schedule.forEach((t,s)=>t.sequence=s+1)}function b(){y.push("/payment-terms")}function U(){if(!o.name.trim())return;o.id||(o.id=p("term_"));const i=JSON.parse(JSON.stringify(o));E(g.paymentTerms,i),alert("Payment term saved"),y.push("/payment-terms")}return(i,t)=>(u(),r("div",P,[e("div",I,[O(C,{title:N(m)?"Edit Payment Term":"New Payment Term"},{actions:D(()=>[e("button",{class:"btn btn-sm btn-outline-secondary",type:"button",onClick:b},"Back to list")]),default:D(()=>[e("div",M,[e("div",L,[t[12]||(t[12]=e("label",{class:"form-label"},"Name",-1)),l(e("input",{class:"form-control form-control-sm","onUpdate:modelValue":t[0]||(t[0]=s=>o.name=s),placeholder:"e.g., 2/10 Net 30 or 50/50 in 30d"},null,512),[[a,o.name]])]),e("div",Y,[t[14]||(t[14]=e("label",{class:"form-label"},"Active",-1)),l(e("select",{class:"form-select form-select-sm","onUpdate:modelValue":t[1]||(t[1]=s=>o.active=s)},[...t[13]||(t[13]=[e("option",{value:!0},"Yes",-1),e("option",{value:!1},"No",-1)])],512),[[d,o.active]])]),e("div",j,[t[15]||(t[15]=e("label",{class:"form-label"},"Description",-1)),l(e("textarea",{class:"form-control",rows:"2","onUpdate:modelValue":t[2]||(t[2]=s=>o.description=s),placeholder:"Optional description"},null,512),[[a,o.description]])]),e("div",q,[t[19]||(t[19]=e("h6",{class:"text-secondary mb-1"},"Schedule",-1)),e("div",B,[e("table",G,[t[18]||(t[18]=e("thead",{class:"table-light"},[e("tr",null,[e("th",{style:{width:"10%"}},"#"),e("th",{style:{width:"18%"}},"Value Type"),e("th",{style:{width:"16%"}},"Value"),e("th",{style:{width:"20%"}},"Date Type"),e("th",{style:{width:"16%"}},"Days / Day"),e("th",null,"Description"),e("th",{class:"text-end",style:{width:"8%"}})])],-1)),e("tbody",null,[(u(!0),r(S,null,h(o.schedule,(s,v)=>(u(),r("tr",{key:s.id},[e("td",null,A(v+1),1),e("td",null,[l(e("select",{class:"form-select form-select-sm","onUpdate:modelValue":n=>s.valueType=n},[...t[16]||(t[16]=[e("option",{value:"percent"},"Percent",-1),e("option",{value:"fixed"},"Fixed Amount",-1)])],8,J),[[d,s.valueType]])]),e("td",null,[l(e("input",{class:"form-control form-control-sm text-end",type:"number",min:"0",step:"0.01","onUpdate:modelValue":n=>s.valueAmount=n},null,8,_),[[a,s.valueAmount,void 0,{number:!0}]])]),e("td",null,[l(e("select",{class:"form-select form-select-sm","onUpdate:modelValue":n=>s.dateType=n},[...t[17]||(t[17]=[e("option",{value:"days_after"},"Days After",-1),e("option",{value:"day_of_month"},"Day of Month (next)",-1)])],8,R),[[d,s.dateType]])]),e("td",null,[s.dateType==="days_after"?l((u(),r("input",{key:0,class:"form-control form-control-sm text-end",type:"number",min:"0",step:"1","onUpdate:modelValue":n=>s.days=n},null,8,W)),[[a,s.days,void 0,{number:!0}]]):l((u(),r("input",{key:1,class:"form-control form-control-sm text-end",type:"number",min:"1",max:"31",step:"1","onUpdate:modelValue":n=>s.dayOfMonth=n},null,8,$)),[[a,s.dayOfMonth,void 0,{number:!0}]])]),e("td",null,[l(e("input",{class:"form-control form-control-sm","onUpdate:modelValue":n=>s.description=n,placeholder:"Optional"},null,8,z),[[a,s.description]])]),e("td",H,[e("button",{class:"btn btn-sm btn-outline-danger",type:"button",onClick:n=>x(v)},"Remove",8,K)])]))),128))])])]),e("button",{class:"btn btn-sm btn-outline-secondary",type:"button",onClick:V},"+ Add line")]),e("div",Q,[t[34]||(t[34]=e("h6",{class:"text-secondary mb-1"},"Options",-1)),e("div",X,[e("div",Z,[t[21]||(t[21]=e("label",{class:"form-label"},"Early Discount?",-1)),l(e("select",{class:"form-select form-select-sm","onUpdate:modelValue":t[3]||(t[3]=s=>o.settings.earlyDiscountEnabled=s)},[...t[20]||(t[20]=[e("option",{value:!0},"Yes",-1),e("option",{value:!1},"No",-1)])],512),[[d,o.settings.earlyDiscountEnabled]])]),e("div",ee,[t[22]||(t[22]=e("label",{class:"form-label"},"Discount %",-1)),l(e("input",{class:"form-control form-control-sm text-end",type:"number",min:"0",step:"0.01","onUpdate:modelValue":t[4]||(t[4]=s=>o.settings.earlyDiscountPercent=s)},null,512),[[a,o.settings.earlyDiscountPercent,void 0,{number:!0}]])]),e("div",te,[t[23]||(t[23]=e("label",{class:"form-label"},"Within (days)",-1)),l(e("input",{class:"form-control form-control-sm text-end",type:"number",min:"0",step:"1","onUpdate:modelValue":t[5]||(t[5]=s=>o.settings.earlyDiscountDays=s)},null,512),[[a,o.settings.earlyDiscountDays,void 0,{number:!0}]])]),e("div",se,[t[25]||(t[25]=e("label",{class:"form-label"},"Show Schedule Dates",-1)),l(e("select",{class:"form-select form-select-sm","onUpdate:modelValue":t[6]||(t[6]=s=>o.settings.showInstallmentDates=s)},[...t[24]||(t[24]=[e("option",{value:!0},"Yes",-1),e("option",{value:!1},"No",-1)])],512),[[d,o.settings.showInstallmentDates]])]),e("div",oe,[t[27]||(t[27]=e("label",{class:"form-label"},"Show on Invoice",-1)),l(e("select",{class:"form-select form-select-sm","onUpdate:modelValue":t[7]||(t[7]=s=>o.settings.showOnInvoice=s)},[...t[26]||(t[26]=[e("option",{value:!0},"Yes",-1),e("option",{value:!1},"No",-1)])],512),[[d,o.settings.showOnInvoice]])]),e("div",le,[t[29]||(t[29]=e("label",{class:"form-label"},"Late Fee Enabled",-1)),l(e("select",{class:"form-select form-select-sm","onUpdate:modelValue":t[8]||(t[8]=s=>o.settings.lateFeeEnabled=s)},[...t[28]||(t[28]=[e("option",{value:!0},"Yes",-1),e("option",{value:!1},"No",-1)])],512),[[d,o.settings.lateFeeEnabled]])]),e("div",ne,[t[31]||(t[31]=e("label",{class:"form-label"},"Late Fee Type",-1)),l(e("select",{class:"form-select form-select-sm","onUpdate:modelValue":t[9]||(t[9]=s=>o.settings.lateFeeType=s)},[...t[30]||(t[30]=[e("option",{value:"percent"},"Percent",-1),e("option",{value:"fixed"},"Fixed",-1)])],512),[[d,o.settings.lateFeeType]])]),e("div",ae,[t[32]||(t[32]=e("label",{class:"form-label"},"Late Fee Amount",-1)),l(e("input",{class:"form-control form-control-sm text-end",type:"number",min:"0",step:"0.01","onUpdate:modelValue":t[10]||(t[10]=s=>o.settings.lateFeeAmount=s)},null,512),[[a,o.settings.lateFeeAmount,void 0,{number:!0}]])]),e("div",de,[t[33]||(t[33]=e("label",{class:"form-label"},"Late Fee Grace (days)",-1)),l(e("input",{class:"form-control form-control-sm text-end",type:"number",min:"0",step:"1","onUpdate:modelValue":t[11]||(t[11]=s=>o.settings.lateFeeGraceDays=s)},null,512),[[a,o.settings.lateFeeGraceDays,void 0,{number:!0}]])])])])]),e("div",{class:"d-flex justify-content-end gap-2 mt-2"},[e("button",{class:"btn btn-outline-secondary",type:"button",onClick:b},"Cancel"),e("button",{class:"btn btn-primary",type:"button",onClick:U},"Save")])]),_:1},8,["title"])])]))}};export{me as default};
