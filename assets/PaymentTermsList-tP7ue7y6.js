import{s as p,b as v,e as u,o as d,f as t,p as w,k as f,v as N,i as S,F as T,h as A,t as l,x as M,y as P}from"./vendor-CDgTUOzk.js";import{S as B}from"./SectionCard-CnFX6nPM.js";import{s as g,r as D}from"./index-DwkO3c2h.js";const L={class:"row g-3"},V={class:"col-12"},F={class:"d-flex gap-2"},R={class:"table-wrapper"},E={class:"table table-sm align-middle"},I={class:"fw-medium"},Z={class:"small text-muted"},j={class:"text-end"},q={class:"btn-group btn-group-sm"},z=["onClick"],O=["onClick"],U={key:0},Y={class:"table-footer"},G={class:"small text-muted"},H={class:"btn-group btn-group-sm"},J=["disabled"],K=["disabled"],b=8,et={__name:"PaymentTermsList",setup(Q){const _=N(),c=p(""),r=p(!0),a=p(1),y=v(()=>{const n=c.value.trim().toLowerCase();let s=g.paymentTerms.slice();return n&&(s=s.filter(e=>{var o;return(o=e.name)==null?void 0:o.toLowerCase().includes(n)})),s.sort((e,o)=>{const i=(e.name||"").localeCompare(o.name||"");return r.value?i:-i}),s}),m=v(()=>Math.max(1,Math.ceil(y.value.length/b))),h=v(()=>{const s=(Math.min(a.value,m.value)-1)*b;return y.value.slice(s,s+b)});function x(){_.push("/payment-terms/new")}function C(n){_.push(`/payment-terms/${n.id}/edit`)}function k(n){confirm(`Delete payment term "${n.name}"?`)&&D(g.paymentTerms,n.id)}function $(n){return(n.schedule||[]).map(e=>{const o=e.valueType==="percent"?`${e.valueAmount}%`:`৳${Number(e.valueAmount).toFixed(0)}`,i=e.dateType==="days_after"?`${e.days||0}d`:`day ${e.dayOfMonth}`;return`${o}@${i}`}).join(", ")}return(n,s)=>(d(),u("div",L,[t("div",V,[w(B,{title:"Payment Terms"},{actions:f(()=>[t("div",F,[M(t("input",{class:"form-control form-control-sm",placeholder:"Search...","onUpdate:modelValue":s[0]||(s[0]=e=>c.value=e)},null,512),[[P,c.value]]),t("button",{class:"btn btn-sm btn-outline-secondary",type:"button",onClick:s[1]||(s[1]=e=>r.value=!r.value)}," Sort "+l(r.value?"A→Z":"Z→A"),1),t("button",{class:"btn btn-sm btn-primary",type:"button",onClick:x},"New")])]),default:f(()=>[t("div",R,[t("table",E,[s[5]||(s[5]=t("thead",null,[t("tr",null,[t("th",null,"Name"),t("th",null,"Active"),t("th",null,"Schedule"),t("th",{class:"text-end"})])],-1)),t("tbody",null,[(d(!0),u(T,null,A(h.value,e=>(d(),u("tr",{key:e.id},[t("td",I,l(e.name),1),t("td",null,l(e.active?"Yes":"No"),1),t("td",Z,l($(e)),1),t("td",j,[t("div",q,[t("button",{class:"btn btn-outline-secondary",onClick:o=>C(e)},"Edit",8,z),t("button",{class:"btn btn-outline-danger",onClick:o=>k(e)},"Delete",8,O)])])]))),128)),h.value.length===0?(d(),u("tr",U,[...s[4]||(s[4]=[t("td",{colspan:"4",class:"text-muted"},"No payment terms found.",-1)])])):S("",!0)])])]),t("div",Y,[t("div",G,"Page "+l(a.value)+" of "+l(m.value),1),t("div",H,[t("button",{class:"btn btn-outline-secondary",disabled:a.value<=1,onClick:s[2]||(s[2]=e=>a.value--)},"Prev",8,J),t("button",{class:"btn btn-outline-secondary",disabled:a.value>=m.value,onClick:s[3]||(s[3]=e=>a.value++)},"Next",8,K)])])]),_:1})])]))}};export{et as default};
