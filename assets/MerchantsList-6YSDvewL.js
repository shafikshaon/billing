import{s as p,b as v,e as u,o as d,f as t,p as B,k,v as M,i as S,F as V,h as A,t as l,x as D,y as I}from"./vendor-CDgTUOzk.js";import{S as L}from"./SectionCard-Emg7MEbk.js";import{s as y,r as P}from"./index-DuACpEyu.js";const z={class:"row g-3"},E={class:"col-12"},F={class:"d-flex gap-2"},T={class:"table-wrapper"},Z={class:"table table-sm align-middle"},q={class:"fw-medium"},R={class:"badge text-bg-secondary text-capitalize"},U={class:"text-end"},j={class:"btn-group btn-group-sm"},G=["onClick"],H=["onClick"],J=["onClick"],K={key:0},O={class:"table-footer"},Q={class:"small text-muted"},W={class:"btn-group btn-group-sm"},X=["disabled"],Y=["disabled"],h=8,ot={__name:"MerchantsList",setup(tt){const c=M(),b=p(""),r=p(!0),a=p(1),_=v(()=>{const n=b.value.trim().toLowerCase();let e=y.merchants.slice();return n&&(e=e.filter(s=>{var o;return(o=s.name)==null?void 0:o.toLowerCase().includes(n)})),e.sort((s,o)=>{const i=(s.name||"").localeCompare(o.name||"");return r.value?i:-i}),e}),m=v(()=>Math.max(1,Math.ceil(_.value.length/h))),f=v(()=>{const e=(Math.min(a.value,m.value)-1)*h;return _.value.slice(e,e+h)});function C(){c.push("/merchants/new")}function x(){c.push("/merchants/bulk-import")}function w(n){c.push(`/merchants/${n.id}`)}function $(n){c.push(`/merchants/${n.id}/edit`)}function N(n){confirm(`Delete merchant "${n.name}"?`)&&P(y.merchants,n.id)}return(n,e)=>(d(),u("div",z,[t("div",E,[B(L,{title:"Merchants"},{actions:k(()=>[t("div",F,[D(t("input",{class:"form-control form-control-sm",placeholder:"Search...","onUpdate:modelValue":e[0]||(e[0]=s=>b.value=s)},null,512),[[I,b.value]]),t("button",{class:"btn btn-sm btn-outline-secondary",type:"button",onClick:e[1]||(e[1]=s=>r.value=!r.value)}," Sort "+l(r.value?"A→Z":"Z→A"),1),t("button",{class:"btn btn-sm btn-success",type:"button",onClick:x},"Bulk Import"),t("button",{class:"btn btn-sm btn-primary",type:"button",onClick:C},"New")])]),default:k(()=>[t("div",T,[t("table",Z,[e[5]||(e[5]=t("thead",null,[t("tr",null,[t("th",null,"Name"),t("th",null,"Type"),t("th",null,"Addresses"),t("th",null,"Contacts"),t("th",{class:"text-end"})])],-1)),t("tbody",null,[(d(!0),u(V,null,A(f.value,s=>{var o,i;return d(),u("tr",{key:s.id},[t("td",q,l(s.name),1),t("td",null,[t("span",R,l(s.type),1)]),t("td",null,l(((o=s.addresses)==null?void 0:o.length)||0),1),t("td",null,l(((i=s.contacts)==null?void 0:i.length)||0),1),t("td",U,[t("div",j,[t("button",{class:"btn btn-outline-secondary",onClick:g=>w(s)},"View",8,G),t("button",{class:"btn btn-outline-secondary",onClick:g=>$(s)},"Edit",8,H),t("button",{class:"btn btn-outline-danger",onClick:g=>N(s)},"Delete",8,J)])])])}),128)),f.value.length===0?(d(),u("tr",K,[...e[4]||(e[4]=[t("td",{colspan:"5",class:"text-muted"},"No merchants found.",-1)])])):S("",!0)])])]),t("div",O,[t("div",Q,"Page "+l(a.value)+" of "+l(m.value),1),t("div",W,[t("button",{class:"btn btn-outline-secondary",disabled:a.value<=1,onClick:e[2]||(e[2]=s=>a.value--)},"Prev",8,X),t("button",{class:"btn btn-outline-secondary",disabled:a.value>=m.value,onClick:e[3]||(e[3]=s=>a.value++)},"Next",8,Y)])])]),_:1})])]))}};export{ot as default};
