import{r as v,e as p,s as r,c as i,o as u,a as t,b as I,w as g,f as B,g as D,F as P,h as S,t as o,u as y,i as T,v as F,j as L}from"./index-DaYuDLQb.js";import{S as M}from"./SectionCard-CHGy0F5-.js";const R={class:"row g-3"},A={class:"col-12"},j={class:"d-flex gap-2"},z={class:"table table-sm align-middle mb-2"},E={class:"fw-medium"},U={class:"text-uppercase"},Z={class:"text-capitalize"},q={key:0},G={key:1,class:"text-muted"},H={class:"text-end"},J={class:"btn-group btn-group-sm"},K=["onClick"],O=["onClick"],Q=["onClick"],W={key:0},X={class:"d-flex justify-content-between align-items-center"},Y={class:"small text-muted"},tt={class:"btn-group btn-group-sm"},et=["disabled"],st=["disabled"],_=10,at={__name:"ProductsList",setup(nt){const c=B(),m=v(""),d=v(!0),a=v(1),h=p(()=>{const n=m.value.trim().toLowerCase();let s=r.products.slice();return n&&(s=s.filter(e=>e.name?.toLowerCase().includes(n))),s.sort((e,l)=>{const x=(e.name||"").localeCompare(l.name||"");return d.value?x:-x}),s}),b=p(()=>Math.max(1,Math.ceil(h.value.length/_))),f=p(()=>{const s=(Math.min(a.value,b.value)-1)*_;return h.value.slice(s,s+_)});function k(){c.push("/products/new")}function C(){c.push("/products/bulk-import")}function w(n){c.push(`/products/${n.id}`)}function N(n){c.push(`/products/${n.id}/edit`)}function $(n){confirm(`Delete product "${n.name}"?`)&&L(r.products,n.id)}function V(n){return!n.discountType||n.discountType==="none"||!n.discountValue?"—":n.discountType==="percent"?`${Number(n.discountValue).toFixed(0)}%`:`৳${Number(n.discountValue).toFixed(2)}`}return(n,s)=>(u(),i("div",R,[t("div",A,[I(M,{title:"Products"},{actions:g(()=>[t("div",j,[T(t("input",{class:"form-control form-control-sm",placeholder:"Search...","onUpdate:modelValue":s[0]||(s[0]=e=>m.value=e)},null,512),[[F,m.value]]),t("button",{class:"btn btn-sm btn-outline-secondary",type:"button",onClick:s[1]||(s[1]=e=>d.value=!d.value)}," Sort "+o(d.value?"A→Z":"Z→A"),1),t("button",{class:"btn btn-sm btn-success",type:"button",onClick:C},"Bulk Import"),t("button",{class:"btn btn-sm btn-primary",type:"button",onClick:k},"New")])]),default:g(()=>[t("table",z,[s[5]||(s[5]=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"Name"),t("th",null,"Unit"),t("th",null,"Type"),t("th",null,"Price"),t("th",null,"Discount"),t("th",null,"Tax"),t("th",{class:"text-end"})])],-1)),t("tbody",null,[(u(!0),i(P,null,S(f.value,e=>(u(),i("tr",{key:e.id},[t("td",E,o(e.name),1),t("td",U,o(e.unit),1),t("td",Z,o(e.type),1),t("td",null,o(Number(e.price||0).toFixed(2)),1),t("td",null,o(V(e)),1),t("td",null,[e.taxId?(u(),i("span",q,o(y(r).taxes.find(l=>l.id===e.taxId)?.name)+" ("+o(y(r).taxes.find(l=>l.id===e.taxId)?.rate)+"%)",1)):(u(),i("span",G,"None"))]),t("td",H,[t("div",J,[t("button",{class:"btn btn-outline-secondary",onClick:l=>w(e)},"View",8,K),t("button",{class:"btn btn-outline-secondary",onClick:l=>N(e)},"Edit",8,O),t("button",{class:"btn btn-outline-danger",onClick:l=>$(e)},"Delete",8,Q)])])]))),128)),f.value.length===0?(u(),i("tr",W,[...s[4]||(s[4]=[t("td",{colspan:"7",class:"text-muted"},"No products found.",-1)])])):D("",!0)])]),t("div",X,[t("div",Y,"Page "+o(a.value)+" of "+o(b.value),1),t("div",tt,[t("button",{class:"btn btn-outline-secondary",disabled:a.value<=1,onClick:s[2]||(s[2]=e=>a.value--)},"Prev",8,et),t("button",{class:"btn btn-outline-secondary",disabled:a.value>=b.value,onClick:s[3]||(s[3]=e=>a.value++)},"Next",8,st)])])]),_:1})])]))}};export{at as default};
