import{j as T,k as C,l as D,s as b,d as w,c as o,o as n,a as t,b as E,w as S,u as U,e as I,h as a,v as u,F as d,g as c,t as r,m as p,f as _,n as O,p as B}from"./index-DREjU6--.js";import{S as j}from"./SectionCard-X4BHsCon.js";const J={class:"row g-3 justify-content-center"},z={class:"col-12 col-lg-8 col-xl-6"},F={class:"row g-3"},M={class:"col-12"},R={class:"col-md-4"},W=["value"],Y={class:"col-md-4"},L=["value"],q={class:"col-md-4"},A={class:"col-md-4"},G=["value"],H={class:"col-md-4"},K={class:"input-group input-group-sm"},Q={key:0,class:"input-group-text"},X={key:1,class:"input-group-text"},Z={class:"col-md-4"},$=["value"],h={class:"col-12"},le={__name:"ProductForm",setup(ee){const v=T(),f=I(),m=v.path.endsWith("/edit"),y=m?v.params.id:null,g=[{value:"pcs",label:"Pcs (Pieces)"},{value:"ea",label:"Each (Ea)"},{value:"units",label:"Units"},{value:"items",label:"Items"},{value:"doz",label:"Dozen (Doz)"},{value:"pair",label:"Pair"},{value:"set",label:"Set"},{value:"pack",label:"Pack"},{value:"box",label:"Box"},{value:"carton",label:"Carton"}],x=["goods","service","digital","rental/lease","subscription","fee","license","expense","material","labor"],N=["none","fixed","percent"],l=C({id:"",name:"",unit:g[0].value,type:x[0],price:0,discountType:"none",discountValue:0,taxId:"",description:""});D(()=>{if(m&&y){const i=b.products.find(e=>e.id===y);i&&Object.assign(l,JSON.parse(JSON.stringify(i)))}});const k=w(()=>l.discountType==="percent");function V(){f.push("/products")}function P(){if(!l.name.trim())return;l.id||(l.id=O("prd_"));const i=JSON.parse(JSON.stringify(l));B(b.products,i),alert("Product saved"),f.push("/products")}return(i,e)=>(n(),o("div",J,[t("div",z,[E(j,{title:U(m)?"Edit Product":"New Product"},{actions:S(()=>[t("button",{class:"btn btn-sm btn-outline-secondary",type:"button",onClick:V},"Back to list")]),default:S(()=>[t("div",F,[t("div",M,[e[8]||(e[8]=t("label",{class:"form-label"},"Name",-1)),a(t("input",{class:"form-control form-control-sm","onUpdate:modelValue":e[0]||(e[0]=s=>l.name=s),placeholder:"e.g., Web design"},null,512),[[u,l.name]])]),t("div",R,[e[9]||(e[9]=t("label",{class:"form-label"},"Unit",-1)),a(t("select",{class:"form-select form-select-sm","onUpdate:modelValue":e[1]||(e[1]=s=>l.unit=s)},[(n(),o(d,null,c(g,s=>t("option",{key:s.value,value:s.value},r(s.label),9,W)),64))],512),[[p,l.unit]])]),t("div",Y,[e[10]||(e[10]=t("label",{class:"form-label"},"Type",-1)),a(t("select",{class:"form-select form-select-sm","onUpdate:modelValue":e[2]||(e[2]=s=>l.type=s)},[(n(),o(d,null,c(x,s=>t("option",{key:s,value:s},r(s[0].toUpperCase()+s.slice(1)),9,L)),64))],512),[[p,l.type]])]),t("div",q,[e[11]||(e[11]=t("label",{class:"form-label"},"Price",-1)),a(t("input",{class:"form-control form-control-sm text-end",type:"number",min:"0",step:"0.01","onUpdate:modelValue":e[3]||(e[3]=s=>l.price=s)},null,512),[[u,l.price,void 0,{number:!0}]])]),t("div",A,[e[12]||(e[12]=t("label",{class:"form-label"},"Discount Type",-1)),a(t("select",{class:"form-select form-select-sm","onUpdate:modelValue":e[4]||(e[4]=s=>l.discountType=s)},[(n(),o(d,null,c(N,s=>t("option",{key:s,value:s},r(s[0].toUpperCase()+s.slice(1)),9,G)),64))],512),[[p,l.discountType]])]),t("div",H,[e[13]||(e[13]=t("label",{class:"form-label"},"Discount Value",-1)),t("div",K,[k.value?_("",!0):(n(),o("span",Q,"à§³")),a(t("input",{class:"form-control",type:"number",min:"0",step:"0.01","onUpdate:modelValue":e[5]||(e[5]=s=>l.discountValue=s)},null,512),[[u,l.discountValue,void 0,{number:!0}]]),k.value?(n(),o("span",X,"%")):_("",!0)])]),t("div",Z,[e[15]||(e[15]=t("label",{class:"form-label"},"Default Tax",-1)),a(t("select",{class:"form-select form-select-sm","onUpdate:modelValue":e[6]||(e[6]=s=>l.taxId=s)},[e[14]||(e[14]=t("option",{value:""},"None",-1)),(n(!0),o(d,null,c(U(b).taxes,s=>(n(),o("option",{key:s.id,value:s.id},r(s.name)+" ("+r(s.rate)+"%)",9,$))),128))],512),[[p,l.taxId]])]),t("div",h,[e[16]||(e[16]=t("label",{class:"form-label"},"Description",-1)),a(t("textarea",{class:"form-control",rows:"2","onUpdate:modelValue":e[7]||(e[7]=s=>l.description=s),placeholder:"Optional"},null,512),[[u,l.description]])])]),t("div",{class:"d-flex justify-content-end gap-2 mt-2"},[t("button",{class:"btn btn-outline-secondary",onClick:V,type:"button"},"Cancel"),t("button",{class:"btn btn-primary",onClick:P,type:"button"},"Save")])]),_:1},8,["title"])])]))}};export{le as default};
