import{r as b,d as p,s as g,c as r,o as c,a as t,b as N,w as C,e as B,f as S,F as V,g as A,t as n,h as D,v as I,i as L}from"./index-y6E_OOsB.js";import{S as M}from"./SectionCard-CLi6ynPh.js";const R={class:"row g-3"},P={class:"col-12"},z={class:"d-flex gap-2"},E={class:"table-wrapper"},F={class:"table table-sm align-middle"},T={class:"fw-medium"},Z={class:"badge text-bg-secondary text-capitalize"},q={class:"text-end"},U={class:"btn-group btn-group-sm"},j=["onClick"],G=["onClick"],H=["onClick"],J={key:0},K={class:"table-footer"},O={class:"small text-muted"},Q={class:"btn-group btn-group-sm"},W=["disabled"],X=["disabled"],v=8,st={__name:"CustomersList",setup(Y){const a=B(),d=b(""),u=b(!0),l=b(1),_=p(()=>{const o=d.value.trim().toLowerCase();let e=g.customers.slice();return o&&(e=e.filter(s=>s.name?.toLowerCase().includes(o))),e.sort((s,i)=>{const f=(s.name||"").localeCompare(i.name||"");return u.value?f:-f}),e}),m=p(()=>Math.max(1,Math.ceil(_.value.length/v))),h=p(()=>{const e=(Math.min(l.value,m.value)-1)*v;return _.value.slice(e,e+v)});function k(){a.push("/customers/new")}function y(){a.push("/customers/bulk-import")}function w(o){a.push(`/customers/${o.id}`)}function x(o){a.push(`/customers/${o.id}/edit`)}function $(o){confirm(`Delete customer "${o.name}"?`)&&L(g.customers,o.id)}return(o,e)=>(c(),r("div",R,[t("div",P,[N(M,{title:"Customers"},{actions:C(()=>[t("div",z,[D(t("input",{class:"form-control form-control-sm",placeholder:"Search...","onUpdate:modelValue":e[0]||(e[0]=s=>d.value=s)},null,512),[[I,d.value]]),t("button",{class:"btn btn-sm btn-outline-secondary",type:"button",onClick:e[1]||(e[1]=s=>u.value=!u.value)}," Sort "+n(u.value?"A→Z":"Z→A"),1),t("button",{class:"btn btn-sm btn-success",type:"button",onClick:y},"Bulk Import"),t("button",{class:"btn btn-sm btn-primary",type:"button",onClick:k},"New")])]),default:C(()=>[t("div",E,[t("table",F,[e[5]||(e[5]=t("thead",null,[t("tr",null,[t("th",null,"Name"),t("th",null,"Type"),t("th",null,"Addresses"),t("th",null,"Contacts"),t("th",{class:"text-end"})])],-1)),t("tbody",null,[(c(!0),r(V,null,A(h.value,s=>(c(),r("tr",{key:s.id},[t("td",T,n(s.name),1),t("td",null,[t("span",Z,n(s.type),1)]),t("td",null,n(s.addresses?.length||0),1),t("td",null,n(s.contacts?.length||0),1),t("td",q,[t("div",U,[t("button",{class:"btn btn-outline-secondary",onClick:i=>w(s)},"View",8,j),t("button",{class:"btn btn-outline-secondary",onClick:i=>x(s)},"Edit",8,G),t("button",{class:"btn btn-outline-danger",onClick:i=>$(s)},"Delete",8,H)])])]))),128)),h.value.length===0?(c(),r("tr",J,[...e[4]||(e[4]=[t("td",{colspan:"5",class:"text-muted"},"No customers found.",-1)])])):S("",!0)])])]),t("div",K,[t("div",O,"Page "+n(l.value)+" of "+n(m.value),1),t("div",Q,[t("button",{class:"btn btn-outline-secondary",disabled:l.value<=1,onClick:e[2]||(e[2]=s=>l.value--)},"Prev",8,W),t("button",{class:"btn btn-outline-secondary",disabled:l.value>=m.value,onClick:e[3]||(e[3]=s=>l.value++)},"Next",8,X)])])]),_:1})])]))}};export{st as default};
