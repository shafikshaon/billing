var f=(d,s,r)=>new Promise((t,a)=>{var g=l=>{try{o(r.next(l))}catch(c){a(c)}},p=l=>{try{o(r.throw(l))}catch(c){a(c)}},o=l=>l.done?t(l.value):Promise.resolve(l.value).then(g,p);o((r=r.apply(d,s)).next())});import{e as n,o as i,f as e,g as y,i as h,B as m,F as S,h as _,p as w,t as C,k as F,d as k,s as u,v as x}from"./vendor-CDgTUOzk.js";import{_ as I,s as V}from"./index-DuACpEyu.js";import{p as P,b as B,c as D,d as N}from"./bulkImport-Cu8A9HIj.js";const E={name:"BulkImportCustomers",setup(){x();const d=u(null),s=u(null),r=u(!1),t=u([]),a=u(0);return{fileInput:d,selectedFile:s,isProcessing:r,errors:t,successCount:a,downloadSample:()=>{const l=D();N("customers_sample.csv",l)},handleFileSelect:l=>{s.value=l.target.files[0],t.value=[],a.value=0},processFile:()=>f(null,null,function*(){if(s.value){r.value=!0,t.value=[],a.value=0;try{const l=yield P(s.value);if(l.errors&&l.errors.length>0){t.value=l.errors.map(v=>`Parse error: ${v.message}`),r.value=!1;return}const{customers:c,errors:b}=B(l.data);if(b.length>0){t.value=b,r.value=!1;return}c.forEach(v=>{V.customers.push(v)}),a.value=c.length,d.value&&(d.value.value=""),s.value=null}catch(l){t.value=[`Error processing file: ${l.message}`]}finally{r.value=!1}}})}}},T={class:"container-fluid py-4"},q={class:"row"},A={class:"col-lg-8"},R={class:"card mb-4"},L={class:"card-body"},U={class:"card mb-4"},z={class:"card-body"},W={class:"mb-3"},Y=["disabled"],Z={key:0},j={key:1},G={key:0,class:"card mb-4 border-danger"},H={class:"card-body"},J={class:"mb-0"},K={key:1,class:"card mb-4 border-success"},M={class:"card-body"},O={class:"mb-0"};function Q(d,s,r,t,a,g){const p=k("router-link");return i(),n("div",T,[s[16]||(s[16]=e("div",{class:"row mb-4"},[e("div",{class:"col"},[e("h2",{class:"mb-3"},"Bulk Import Customers"),e("p",{class:"text-muted"}," Import multiple customers with their contacts and addresses from a CSV file ")])],-1)),e("div",q,[e("div",A,[e("div",R,[s[5]||(s[5]=e("div",{class:"card-header bg-primary text-white"},[e("h5",{class:"mb-0"},"Step 1: Download Sample Template")],-1)),e("div",L,[s[4]||(s[4]=e("p",null,"Download the sample CSV file with example data to see the correct format.",-1)),e("button",{onClick:s[0]||(s[0]=(...o)=>t.downloadSample&&t.downloadSample(...o)),class:"btn btn-success"},[...s[3]||(s[3]=[e("i",{class:"bi bi-download"},null,-1),m(" Download Sample CSV ",-1)])])])]),e("div",U,[s[9]||(s[9]=e("div",{class:"card-header bg-primary text-white"},[e("h5",{class:"mb-0"},"Step 2: Upload Your CSV File")],-1)),e("div",z,[e("div",W,[s[6]||(s[6]=e("label",{for:"fileInput",class:"form-label"},"Select CSV File",-1)),e("input",{id:"fileInput",ref:"fileInput",type:"file",class:"form-control",accept:".csv",onChange:s[1]||(s[1]=(...o)=>t.handleFileSelect&&t.handleFileSelect(...o))},null,544)]),e("button",{onClick:s[2]||(s[2]=(...o)=>t.processFile&&t.processFile(...o)),disabled:!t.selectedFile||t.isProcessing,class:"btn btn-primary"},[t.isProcessing?(i(),n("span",Z,[...s[7]||(s[7]=[e("span",{class:"spinner-border spinner-border-sm me-2"},null,-1),m(" Processing... ",-1)])])):(i(),n("span",j,[...s[8]||(s[8]=[e("i",{class:"bi bi-upload"},null,-1),m(" Process File ",-1)])]))],8,Y)])]),t.errors.length>0?(i(),n("div",G,[s[10]||(s[10]=e("div",{class:"card-header bg-danger text-white"},[e("h5",{class:"mb-0"},"Errors Found")],-1)),e("div",H,[e("ul",J,[(i(!0),n(S,null,_(t.errors,(o,l)=>(i(),n("li",{key:l,class:"text-danger"},C(o),1))),128))])])])):h("",!0),t.successCount>0?(i(),n("div",K,[s[14]||(s[14]=e("div",{class:"card-header bg-success text-white"},[e("h5",{class:"mb-0"},"Import Successful")],-1)),e("div",M,[e("p",O,[s[11]||(s[11]=m(" Successfully imported ",-1)),e("strong",null,C(t.successCount),1),s[12]||(s[12]=m(" customer(s). ",-1))]),w(p,{to:"/customers",class:"btn btn-primary mt-3"},{default:F(()=>[...s[13]||(s[13]=[m(" View Customers ",-1)])]),_:1})])])):h("",!0)]),s[15]||(s[15]=y('<div class="col-lg-4"><div class="card"><div class="card-header bg-info text-white"><h5 class="mb-0">Instructions</h5></div><div class="card-body"><h6>CSV Format Requirements:</h6><ul class="small"><li><strong>name</strong> (required): Customer name</li><li><strong>type</strong> (required): &#39;company&#39; or &#39;person&#39;</li><li><strong>email</strong>: Contact email</li><li><strong>phone</strong>: Contact phone</li><li><strong>taxId</strong>: Tax ID or TIN (for companies)</li><li><strong>nid</strong>: National ID (for individuals)</li><li><strong>website</strong>: Website URL</li></ul><h6 class="mt-3">Addresses (up to 2):</h6><ul class="small"><li><strong>address1_type</strong>: primary, billing, shipping, warehouse, secondary</li><li><strong>address1_line1</strong>: Address line 1</li><li><strong>address1_line2</strong>: Address line 2</li><li><strong>address1_city</strong>: City</li><li><strong>address1_zip</strong>: ZIP/Postal code</li><li>Same pattern for address2_*</li></ul><h6 class="mt-3">Contacts (up to 2):</h6><ul class="small"><li><strong>contact1_type</strong>: primary, billing, support, secondary</li><li><strong>contact1_name</strong>: Contact name</li><li><strong>contact1_email</strong>: Contact email</li><li><strong>contact1_phone</strong>: Contact phone</li><li>Same pattern for contact2_*</li></ul></div></div></div>',1))])])}const ts=I(E,[["render",Q]]);export{ts as default};
