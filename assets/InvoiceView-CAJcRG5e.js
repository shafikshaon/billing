var st=(nt,et,L)=>new Promise((q,l)=>{var F=N=>{try{S(L.next(N))}catch(w){l(w)}},A=N=>{try{S(L.throw(N))}catch(w){l(w)}},S=N=>N.done?q(N.value):Promise.resolve(N.value).then(F,A);S((L=L.apply(nt,et)).next())});import{u as wt,v as Tt,b as At,d as g,e as n,o as a,p as St,l as lt,f as t,j as i,t as s,C as M,F as V,g as H,m as E,n as Dt}from"./vendor-iuljl24U.js";import{S as $t}from"./SectionCard-Dmmq5Wv1.js";import{_ as Ct,s as k}from"./index-C5H4V0g2.js";const Pt={key:0},Mt={class:"d-flex align-items-center gap-3"},Vt={class:"btn-group btn-group-sm"},zt={class:"detail-section"},Lt={class:"detail-grid"},qt={class:"detail-item"},Bt={class:"detail-value large"},Rt={class:"detail-item"},jt={class:"detail-value"},Et={class:"detail-item"},Xt={class:"detail-value"},Ot={key:0,class:"detail-item"},Yt={class:"detail-value"},Ht={key:1,class:"detail-item"},Qt={class:"detail-section"},Ut={class:"detail-grid",style:{"grid-template-columns":"repeat(auto-fit, minmax(300px, 1fr))"}},Wt={class:"detail-item"},Kt={class:"detail-value"},Gt={class:"fw-semibold"},Jt={key:0,class:"text-muted small mt-1"},Zt={key:1,class:"text-muted small mt-1"},te={key:0},ee={key:1},se={class:"detail-item"},le={class:"detail-value"},ne={class:"fw-semibold"},ae={key:0,class:"text-muted small mt-1"},oe={key:1,class:"text-muted small mt-1"},ie={key:0},de={key:1},ue={class:"detail-section"},re={class:"table-responsive"},ve={class:"table table-sm table-invoice align-middle"},me={class:"fw-medium"},ce={key:0,class:"text-muted small"},pe={class:"text-end"},be={class:"text-end"},he={class:"text-end"},xe={key:0},ye={key:1},_e={key:2},ge={class:"text-end fw-semibold"},fe={key:0},ke={class:"detail-section"},Fe={class:"totals-container"},Ne={class:"totals-grid"},Ie={class:"totals-row"},we={class:"totals-value"},Te={class:"totals-row"},Ae={class:"totals-value"},Se={class:"totals-row"},De={class:"totals-value"},$e={class:"text-decoration-line-through text-muted"},Ce={class:"totals-row totals-grand"},Pe={class:"totals-value"},Me={key:0,class:"totals-row"},Ve={class:"totals-value text-success"},ze={key:1,class:"totals-row"},Le={class:"totals-value"},qe={key:2,class:"totals-row"},Be={class:"totals-value"},Re={key:3,class:"totals-row totals-balance"},je={class:"totals-value"},Ee={key:0,class:"text-muted small mt-2"},Xe={key:0,class:"detail-section"},Oe={class:"detail-section-title"},Ye={class:"table-responsive"},He={class:"table table-sm"},Qe={class:"text-end"},Ue={key:1,class:"detail-section"},We={key:0,class:"mb-3"},Ke={class:"detail-value",style:{"white-space":"pre-wrap"}},Ge={key:1},Je={class:"detail-value",style:{"white-space":"pre-wrap"}},Ze={class:"d-flex justify-content-between mb-3"},ts={key:0},es={key:1},ss={key:2,class:"text-muted small"},ls={key:3},ns={key:4,class:"text-muted small"},as={key:0},os={key:1},is={class:"text-end"},ds={class:"mb-2 info-block"},us={class:"fw-semibold"},rs={key:0},vs={key:1,class:"text-muted small"},ms={key:2,class:"text-muted small"},cs={key:0},ps={key:1},bs={class:"table table-sm table-invoice align-middle mt-2"},hs={class:"fw-medium"},xs={key:0,class:"text-muted small"},ys={class:"text-end"},_s={class:"text-end"},gs={class:"text-end"},fs={key:0},ks={key:1},Fs={key:2},Ns={class:"text-end"},Is={class:"mt-2 d-flex"},ws={class:"totals-card"},Ts={class:"line"},As={class:"line"},Ss={class:"line"},Ds={class:"text-decoration-line-through"},$s={class:"line grand"},Cs={key:0,class:"line"},Ps={key:1,class:"line"},Ms={key:2,class:"line"},Vs={key:3,class:"line"},zs={class:"fw-semibold"},Ls={key:4,class:"muted small mt-1"},qs={key:0,class:"mt-2"},Bs={class:"table table-sm mt-1"},Rs={class:"text-end"},js={key:1,class:"mt-3 invoice-terms"},Es={style:{"white-space":"pre-wrap"}},Xs={key:2,class:"mt-2 text-muted"},Os={key:3,class:"mt-2"},Ys={style:{"white-space":"pre-wrap"}},Hs={class:"pos-receipt","aria-hidden":"true"},Qs={class:"pos-head center"},Us={class:"title"},Ws={key:0,class:"small muted"},Ks={key:1,class:"small muted"},Gs={class:"pos-line small"},Js={class:"pos-line small"},Zs={key:0,class:"pos-line small"},tl={class:"pos-items"},el={class:"sl"},sl={class:"desc"},ll={class:"nm"},nl={class:"muted small"},al={class:"amt"},ol={key:0},il={class:"pos-totals"},dl={class:"pos-line"},ul={class:"pos-line"},rl={key:0,class:"pos-line"},vl={class:"pos-line grand"},ml={key:1,class:"pos-line"},cl={key:2,class:"pos-line"},pl={key:3,class:"pos-line"},bl={key:4,class:"pos-line"},hl={key:1,class:"small muted"},xl={key:2,class:"center small muted",style:{"margin-top":"4px"}},yl={class:"pos-receipt","aria-hidden":"true"},_l={class:"pos-head center"},gl={class:"title"},fl={key:0,class:"small muted"},kl={key:1,class:"small muted"},Fl={class:"pos-line small"},Nl={class:"pos-line small"},Il={key:0,class:"pos-line small"},wl={class:"pos-items"},Tl={class:"sl"},Al={class:"desc"},Sl={class:"nm"},Dl={class:"muted small"},$l={class:"amt"},Cl={key:0},Pl={class:"pos-totals"},Ml={class:"pos-line"},Vl={class:"pos-line"},zl={key:0,class:"pos-line"},Ll={class:"pos-line grand"},ql={key:1,class:"pos-line"},Bl={key:2,class:"pos-line"},Rl={key:3,class:"pos-line"},jl={key:4,class:"pos-line"},El={key:1,class:"small muted"},Xl={key:2,class:"center small muted",style:{"margin-top":"4px"}},Ol={key:1,class:"empty-state"},Yl={__name:"InvoiceView",setup(nt){const et=wt(),L=Tt(),q=At(null),l=g(()=>k.invoices.find(o=>o.id===et.params.id)),F=g(()=>k.merchants.find(o=>{var e;return o.id===((e=l.value)==null?void 0:e.merchantId)})),A=g(()=>k.customers.find(o=>{var e;return o.id===((e=l.value)==null?void 0:e.customerId)})),S=g(()=>k.paymentTerms.find(o=>{var e;return o.id===((e=l.value)==null?void 0:e.paymentTermId)})),N=g(()=>k.termsTemplates.find(o=>{var e;return o.id===((e=l.value)==null?void 0:e.termsTemplateId)})),w=g(()=>k.shippingMethods.find(o=>{var e;return o.id===((e=l.value)==null?void 0:e.shippingMethodId)}));function B(o){return k.products.find(e=>e.id===o)}const at=g(()=>{var o;return((o=F.value)==null?void 0:o.addresses)||[]}),ot=g(()=>{var o;return((o=F.value)==null?void 0:o.contacts)||[]}),T=g(()=>at.value.find(o=>{var e;return o.id===((e=l.value)==null?void 0:e.merchantAddressId)})||at.value[0]),x=g(()=>ot.value.find(o=>{var e;return o.id===((e=l.value)==null?void 0:e.merchantContactId)})||ot.value[0]),it=g(()=>{var o;return((o=A.value)==null?void 0:o.addresses)||[]}),dt=g(()=>{var o;return((o=A.value)==null?void 0:o.contacts)||[]}),R=g(()=>it.value.find(o=>{var e;return o.id===((e=l.value)==null?void 0:e.customerAddressId)})||it.value[0]),y=g(()=>dt.value.find(o=>{var e;return o.id===((e=l.value)==null?void 0:e.customerContactId)})||dt.value[0]);function X(o){const e=(Number(o.qty)||0)*(Number(o.unitPrice)||0),r=o.discountType||"none",u=Number(o.discountValue)||0,b=r==="percent"?e*u/100:r==="fixed"?(Number(o.qty)||0)*u:0;return Math.max(0,e-b)}const c=g(()=>{var b,m;const o=l.value;if(!o)return{sub:0,tax:0,shipping:0,total:0};let e=0,r=0;for(const v of o.items||[]){const _=X(v);e+=_;const h=k.taxes.find(D=>D.id===v.taxId);h&&(r+=_*(Number(h.rate)||0)/100)}const u=Number(o.shippingFree?0:(m=(b=o.shippingAmount)!=null?b:o.shippingFee)!=null?m:0);return{sub:e,tax:r,shipping:u,total:e+r+u}});function yt(o,e){const[r,u,b]=String(o||"").split("-").map(Number),m=new Date(r||0,(u||1)-1,b||1);m.setDate(m.getDate()+(Number(e)||0));const v=m.getFullYear(),_=String(m.getMonth()+1).padStart(2,"0"),h=String(m.getDate()).padStart(2,"0");return`${v}-${_}-${h}`}function _t(o,e){const[r,u,b]=String(o||"").split("-").map(Number),m=new Date(r||0,(u||1)-1,b||1),v=new Date(m.getFullYear(),m.getMonth()+1,1),_=new Date(v.getFullYear(),v.getMonth()+1,0).getDate();v.setDate(Math.min(Number(e)||1,_));const h=v.getFullYear(),D=String(v.getMonth()+1).padStart(2,"0"),C=String(v.getDate()).padStart(2,"0");return`${h}-${D}-${C}`}const O=g(()=>{const o=l.value,e=S.value;if(!o||!e||o.paidInFull)return[];const r=c.value.total,u=(e.schedule||[]).slice().sort((m,v)=>(m.sequence||0)-(v.sequence||0));let b=r;return u.map((m,v)=>{const _=m.dateType==="day_of_month"?_t(o.date,m.dayOfMonth||1):yt(o.date,m.days||0);let h=m.valueType==="percent"?r*(Number(m.valueAmount)||0)/100:Number(m.valueAmount)||0;return v===u.length-1&&(h=b),b=Math.max(0,b-h),[m.description||`Installment ${v+1}`,_,h]})}),gt=g(()=>(k.creditNotes||[]).filter(o=>{var e;return o.originalInvoiceId===((e=l.value)==null?void 0:e.id)&&(o.status==="issued"||o.status==="applied")}));function ft(o){return(o.items||[]).reduce((r,u)=>{const b=(Number(u.qty)||0)*(Number(u.unitPrice)||0),m=u.discountType||"none",v=Number(u.discountValue)||0,_=m==="percent"?b*v/100:m==="fixed"?(Number(u.qty)||0)*v:0,h=Math.max(0,b-_),D=(()=>{const C=k.taxes.find(Y=>Y.id===u.taxId);return C?h*(Number(C.rate)||0)/100:0})();return r+h+D},0)}const f=g(()=>gt.value.reduce((o,e)=>o+ft(e),0));function kt(){var v,_;if(!(q!=null&&q.value))return;const o=q.value.outerHTML,e=document.createElement("iframe");e.style.position="fixed",e.style.right="0",e.style.bottom="0",e.style.width="0",e.style.height="0",e.style.border="0",document.body.appendChild(e);const r=e.contentDocument||((v=e.contentWindow)==null?void 0:v.document);if(!r){document.body.removeChild(e);return}r.open(),r.write(`
    <html>
      <head>
        <meta charset="utf-8"/>
        <title>${((_=l.value)==null?void 0:_.number)||"Invoice"}</title>
        <link rel="stylesheet" href="https://bootswatch.com/5/pulse/bootstrap.min.css"/>
        <style>
          @page { size: A4; margin: 10mm; }
          html, body { margin: 0; padding: 0; background: #fff; -webkit-print-color-adjust: exact; print-color-adjust: exact; }
          /* Keep content within the printable area (190mm after margins) */
          .print-area { width: auto; max-width: 190mm; margin: 0 auto; border: none; }
          .print-area h4 { font-size: 20px; color: #4a148c; }
          .print-area table { font-size: 12px; }
          /* Match the detail view styling */
          .table td, .table th { vertical-align: middle; }
          .info-block { border: 1px solid rgba(0,0,0,.08); border-radius: .5rem; padding: .5rem .75rem; background: #fafafa; }
          .muted-label { font-size: .72rem; letter-spacing: .08em; color: #6c757d; }
          .totals-card { border: 1px solid rgba(0,0,0,.08); border-radius: .5rem; padding: .5rem .75rem; min-width: 160px; }
          .totals-card .line { display: flex; justify-content: space-between; }
          .totals-card .grand { font-weight: 700; }
        </style>
      </head>
      <body>${o}</body>
    </html>
  `),r.close();const u=e.contentWindow,b=()=>setTimeout(()=>{document.body.removeChild(e)},0),m=()=>{try{u.focus(),u.print()}finally{b()}};r.readyState==="complete"?setTimeout(m,150):u.addEventListener("load",()=>setTimeout(m,150))}function Ft(){document.body.classList.add("pos-print");const o=()=>document.body.classList.remove("pos-print");window.addEventListener("afterprint",o,{once:!0}),setTimeout(()=>{try{window.print()}finally{setTimeout(o,1200)}},50)}function Nt(){return st(this,null,function*(){var Q,U,W,K,G,J;if(!l.value)return;function o(){return st(this,null,function*(){return window.pdfMake||(yield new Promise((p,P)=>{const I=document.createElement("script");I.src="https://cdn.jsdelivr.net/npm/pdfmake@0.2.10/build/pdfmake.min.js",I.onload=p,I.onerror=P,document.body.appendChild(I)}),yield new Promise((p,P)=>{const I=document.createElement("script");I.src="https://cdn.jsdelivr.net/npm/pdfmake@0.2.10/build/vfs_fonts.min.js",I.onload=p,I.onerror=P,document.body.appendChild(I)})),window.pdfMake})}yield o();const e=l.value,r=F.value,u=A.value;function b(p){return(p.discountType||"none")==="percent"?`-${Number(p.discountValue||0).toFixed(0)}%`:(p.discountType||"none")==="fixed"?`- ${(Number(p.discountValue||0)*Number(p.qty||0)).toFixed(2)}`:"—"}const m=[[{text:"Product / Description",bold:!0},{text:"Qty",alignment:"right",bold:!0},{text:"Unit",alignment:"right",bold:!0},{text:"Discount",alignment:"right",bold:!0},{text:"Line",alignment:"right",bold:!0}],...(e.items||[]).map(p=>{var P;return[((P=B(p.productId))==null?void 0:P.name)||p.description||"—",{text:String(p.qty||0),alignment:"right"},{text:Number(p.unitPrice||0).toFixed(2),alignment:"right"},{text:b(p),alignment:"right"},{text:X(p).toFixed(2),alignment:"right"}]})],v=[{text:`Subtotal: ${c.value.sub.toFixed(2)}`},{text:`Tax: ${c.value.tax.toFixed(2)}`}],_=!!e.shippingFree;Number((U=(Q=e.shippingAmount)!=null?Q:e.shippingFee)!=null?U:0),_?v.push({text:"Shipping: 0.00 (free)",color:"#6c757d"}):v.push({text:`Shipping: ${c.value.shipping.toFixed(2)}`}),v.push({text:`Total: ${c.value.total.toFixed(2)}`,bold:!0});const h=Number(f.value||0);h>0&&v.push({text:`Credits: -${h.toFixed(2)}`});const D=Number(e.receivedAmount||0),C=Number(e.changeAmount||0);D>0&&v.push({text:`Received: ${D.toFixed(2)}`}),C>0&&v.push({text:`Change: ${C.toFixed(2)}`});const Y=Math.max(0,c.value.total-h-D);(D>0||h>0||e.paidInFull)&&v.push({text:`Balance Due: ${Y.toFixed(2)}`,bold:!0}),(W=w.value)!=null&&W.name&&v.push({text:`Shipping via ${w.value.name}`,color:"#6c757d",fontSize:9,margin:[0,4,0,0]});const j=[{columns:[[{text:(r==null?void 0:r.name)||"",bold:!0,fontSize:12},(K=r==null?void 0:r.addresses)!=null&&K.length?{text:`${r.addresses[0].line1}, ${r.addresses[0].city}`}:{},r!=null&&r.taxId?{text:`VAT/TAX ID: ${r.taxId}`,color:"#6c757d",fontSize:9}:{},x.value?{text:`${x.value.name||""}${x.value.email?" · "+x.value.email:""}${x.value.phone?" · "+x.value.phone:""}`,color:"#6c757d",fontSize:9}:{}],{width:"auto",alignment:"right",stack:[{text:"Invoice",style:"title"},{text:`No: ${e.number}`,bold:!0},{text:`Date: ${e.date}`},{text:`Due: ${e.dueDate}`}]}]},{text:" ",margin:[0,6]},{text:"BILL TO",color:"#6c757d",fontSize:9,letterSpacing:.5},{text:(u==null?void 0:u.name)||"",bold:!0},(G=u==null?void 0:u.addresses)!=null&&G.length?{text:`${u.addresses[0].line1}, ${u.addresses[0].city}`}:{},u!=null&&u.taxId?{text:`VAT/TAX ID: ${u.taxId}`,color:"#6c757d",fontSize:9}:{},y.value?{text:`${y.value.name||""}${y.value.email?" · "+y.value.email:""}${y.value.phone?" · "+y.value.phone:""}`,color:"#6c757d",fontSize:9}:{},{text:" ",margin:[0,6]},{table:{headerRows:1,widths:["*",40,50,55,60],body:m},layout:"lightHorizontalLines"},{columns:[{text:" "},{width:200,alignment:"right",stack:v}],margin:[0,8,0,0]}];S.value&&!e.paidInFull&&(O.value||[]).length&&j.push({text:" ",margin:[0,6]},{text:`Payment Schedule — ${S.value.name}`,bold:!0},{table:{headerRows:1,widths:["*",80,70],body:[[{text:"Installment",bold:!0},{text:"Date",bold:!0},{text:"Amount",bold:!0,alignment:"right"}],...O.value.map(p=>[p[0],p[1],{text:Number(p[2]).toFixed(2),alignment:"right"}])]},layout:"lightHorizontalLines",margin:[0,4,0,0]}),(((J=N.value)==null?void 0:J.content)||"").trim()&&j.push({text:" ",margin:[0,8]},{text:"Terms",bold:!0},{text:N.value.content,margin:[0,2,0,0]}),(e.notes||"").trim()&&j.push({text:" ",margin:[0,6]},{text:"Notes",bold:!0},{text:e.notes,margin:[0,2,0,0]});const tt={pageSize:"A4",pageMargins:[28,28,28,28],content:j,footer:(p,P)=>{var I,Z;return{margin:[28,8,28,16],fontSize:9,text:((Z=(I=k.settings)==null?void 0:I.invoice)==null?void 0:Z.footerText)||""}},styles:{title:{fontSize:18,color:"#4a148c",bold:!0}},defaultStyle:{fontSize:10}};window.pdfMake.createPdf(tt).download(`invoice_${e.number||"view"}.pdf`)})}function It(){l.value&&L.push(`/invoices/${l.value.id}/edit`)}return(o,e)=>l.value?(a(),n("div",Pt,[St($t,null,{title:lt(()=>[t("div",Mt,[t("span",null,"Invoice "+s(l.value.number),1),l.value.status?(a(),n("span",{key:0,class:Dt(["badge",`badge-${l.value.status}`])},s(l.value.status),3)):i("",!0)])]),actions:lt(()=>[t("div",Vt,[t("button",{class:"btn btn-outline-secondary",onClick:It},"Edit"),t("button",{class:"btn btn-outline-secondary",onClick:kt},"Print"),t("button",{class:"btn btn-outline-secondary",onClick:Ft},"Receipt"),t("button",{class:"btn btn-outline-secondary",onClick:e[0]||(e[0]=()=>E(L).push(`/credit-notes/new?invoiceId=${l.value.id}`))},"New Credit Note"),t("button",{class:"btn btn-primary",onClick:Nt},"Download PDF")])]),default:lt(()=>{var r,u,b,m,v,_,h,D,C,Y,j,tt,Q,U,W,K,G,J,p,P,I,Z,ut,rt,vt,mt,ct,pt,bt,ht,xt;return[t("div",zt,[e[6]||(e[6]=t("h3",{class:"detail-section-title"},"Invoice Information",-1)),t("div",Lt,[t("div",qt,[e[1]||(e[1]=t("div",{class:"detail-label"},"Invoice Number",-1)),t("div",Bt,s(l.value.number),1)]),t("div",Rt,[e[2]||(e[2]=t("div",{class:"detail-label"},"Invoice Date",-1)),t("div",jt,s(l.value.date),1)]),t("div",Et,[e[3]||(e[3]=t("div",{class:"detail-label"},"Due Date",-1)),t("div",Xt,s(l.value.dueDate),1)]),S.value?(a(),n("div",Ot,[e[4]||(e[4]=t("div",{class:"detail-label"},"Payment Terms",-1)),t("div",Yt,s(S.value.name),1)])):i("",!0),l.value.paidInFull?(a(),n("div",Ht,[...e[5]||(e[5]=[t("div",{class:"detail-label"},"Payment Status",-1),t("div",{class:"detail-value"},[t("span",{class:"badge badge-success"},"Paid in Full")],-1)])])):i("",!0)])]),t("div",Qt,[e[13]||(e[13]=t("h3",{class:"detail-section-title"},"Parties",-1)),t("div",Ut,[t("div",Wt,[e[9]||(e[9]=t("div",{class:"detail-label"},"From (Merchant)",-1)),t("div",Kt,[t("div",Gt,s((r=F.value)==null?void 0:r.name),1),T.value?(a(),n("div",Jt,[M(s(T.value.line1),1),e[7]||(e[7]=t("br",null,null,-1)),M(" "+s(T.value.city)+" "+s(T.value.zip),1)])):i("",!0),x.value?(a(),n("div",Zt,[M(s(x.value.name),1),e[8]||(e[8]=t("br",null,null,-1)),x.value.email?(a(),n("span",te,s(x.value.email),1)):i("",!0),x.value.phone?(a(),n("span",ee," · "+s(x.value.phone),1)):i("",!0)])):i("",!0)])]),t("div",se,[e[12]||(e[12]=t("div",{class:"detail-label"},"To (Customer)",-1)),t("div",le,[t("div",ne,s((u=A.value)==null?void 0:u.name),1),R.value?(a(),n("div",ae,[M(s(R.value.line1),1),e[10]||(e[10]=t("br",null,null,-1)),M(" "+s(R.value.city)+" "+s(R.value.zip),1)])):i("",!0),y.value?(a(),n("div",oe,[M(s(y.value.name),1),e[11]||(e[11]=t("br",null,null,-1)),y.value.email?(a(),n("span",ie,s(y.value.email),1)):i("",!0),y.value.phone?(a(),n("span",de," · "+s(y.value.phone),1)):i("",!0)])):i("",!0)])])])]),t("div",ue,[e[16]||(e[16]=t("h3",{class:"detail-section-title"},"Line Items",-1)),t("div",re,[t("table",ve,[e[15]||(e[15]=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"Product / Description"),t("th",{class:"text-end"},"Qty"),t("th",{class:"text-end"},"Unit Price"),t("th",{class:"text-end"},"Discount"),t("th",{class:"text-end"},"Line Total")])],-1)),t("tbody",null,[(a(!0),n(V,null,H(l.value.items,d=>{var z,$;return a(),n("tr",{key:d.id},[t("td",null,[t("div",me,s(((z=B(d.productId))==null?void 0:z.name)||d.description||"—"),1),d.description&&(($=B(d.productId))==null?void 0:$.name)!==d.description?(a(),n("div",ce,s(d.description),1)):i("",!0)]),t("td",pe,s(d.qty),1),t("td",be,s(Number(d.unitPrice||0).toFixed(2)),1),t("td",he,[(d.discountType||"none")==="percent"?(a(),n("span",xe,"-"+s(Number(d.discountValue||0).toFixed(0))+"%",1)):(d.discountType||"none")==="fixed"?(a(),n("span",ye,"-"+s((Number(d.discountValue||0)*Number(d.qty||0)).toFixed(2)),1)):(a(),n("span",_e,"—"))]),t("td",ge,s(X(d).toFixed(2)),1)])}),128)),!l.value.items||!l.value.items.length?(a(),n("tr",fe,[...e[14]||(e[14]=[t("td",{colspan:"5",class:"text-center text-muted"},"No items",-1)])])):i("",!0)])])])]),t("div",ke,[e[26]||(e[26]=t("h3",{class:"detail-section-title"},"Totals",-1)),t("div",Fe,[t("div",Ne,[t("div",Ie,[e[17]||(e[17]=t("span",{class:"totals-label"},"Subtotal",-1)),t("span",we,s(c.value.sub.toFixed(2)),1)]),t("div",Te,[e[18]||(e[18]=t("span",{class:"totals-label"},"Tax",-1)),t("span",Ae,s(c.value.tax.toFixed(2)),1)]),t("div",Se,[e[20]||(e[20]=t("span",{class:"totals-label"},"Shipping",-1)),t("span",De,[l.value.shippingFree?(a(),n(V,{key:0},[t("span",$e,s(Number(l.value.shippingAmount||0).toFixed(2)),1),e[19]||(e[19]=t("span",{class:"ms-1"},"0.00",-1))],64)):(a(),n(V,{key:1},[M(s(c.value.shipping.toFixed(2)),1)],64))])]),t("div",Ce,[e[21]||(e[21]=t("span",{class:"totals-label"},"Total",-1)),t("span",Pe,s(c.value.total.toFixed(2)),1)]),f.value>0?(a(),n("div",Me,[e[22]||(e[22]=t("span",{class:"totals-label"},"Credits Applied",-1)),t("span",Ve,"-"+s(f.value.toFixed(2)),1)])):i("",!0),l.value.paidInFull||Number(l.value.receivedAmount||0)>0?(a(),n("div",ze,[e[23]||(e[23]=t("span",{class:"totals-label"},"Received",-1)),t("span",Le,s(Number(l.value.receivedAmount||0).toFixed(2)),1)])):i("",!0),Number(l.value.changeAmount||0)>0?(a(),n("div",qe,[e[24]||(e[24]=t("span",{class:"totals-label"},"Change",-1)),t("span",Be,s(Number(l.value.changeAmount||0).toFixed(2)),1)])):i("",!0),l.value.paidInFull||Number(l.value.receivedAmount||0)>0||f.value>0?(a(),n("div",Re,[e[25]||(e[25]=t("span",{class:"totals-label"},"Balance Due",-1)),t("span",je,s(Math.max(0,c.value.total-f.value-Number(l.value.receivedAmount||0)).toFixed(2)),1)])):i("",!0)]),w.value?(a(),n("div",Ee," Shipping via "+s(w.value.name),1)):i("",!0)])]),S.value&&!l.value.paidInFull&&O.value.length?(a(),n("div",Xe,[t("h3",Oe,"Payment Schedule — "+s((b=S.value)==null?void 0:b.name),1),t("div",Ye,[t("table",He,[e[27]||(e[27]=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"Installment"),t("th",null,"Date"),t("th",{class:"text-end"},"Amount")])],-1)),t("tbody",null,[(a(!0),n(V,null,H(O.value,d=>(a(),n("tr",{key:d[0]+d[1]},[t("td",null,s(d[0]),1),t("td",null,s(d[1]),1),t("td",Qe,s(Number(d[2]).toFixed(2)),1)]))),128))])])])])):i("",!0),(m=N.value)!=null&&m.content||l.value.notes?(a(),n("div",Ue,[e[30]||(e[30]=t("h3",{class:"detail-section-title"},"Additional Information",-1)),(v=N.value)!=null&&v.content?(a(),n("div",We,[e[28]||(e[28]=t("div",{class:"detail-label mb-2"},"Terms",-1)),t("div",Ke,s(N.value.content),1)])):i("",!0),l.value.notes?(a(),n("div",Ge,[e[29]||(e[29]=t("div",{class:"detail-label mb-2"},"Notes",-1)),t("div",Je,s(l.value.notes),1)])):i("",!0)])):i("",!0),t("div",{class:"print-area",ref_key:"printRef",ref:q},[t("div",Ze,[t("div",null,[t("strong",null,s((_=F.value)==null?void 0:_.name),1),e[31]||(e[31]=t("br",null,null,-1)),T.value?(a(),n("span",ts,s(T.value.line1)+", "+s(T.value.city),1)):i("",!0),T.value?(a(),n("br",es)):i("",!0),(h=F.value)!=null&&h.taxId?(a(),n("span",ss,"VAT/TAX ID: "+s(F.value.taxId),1)):i("",!0),(D=F.value)!=null&&D.taxId?(a(),n("br",ls)):i("",!0),x.value?(a(),n("span",ns,[M(s(x.value.name),1),x.value.email?(a(),n("span",as," · "+s(x.value.email),1)):i("",!0),x.value.phone?(a(),n("span",os," · "+s(x.value.phone),1)):i("",!0)])):i("",!0)]),t("div",is,[e[32]||(e[32]=t("h4",{class:"mb-1"},"Invoice",-1)),t("div",null,[t("strong",null,"No: "+s(l.value.number),1)]),t("div",null,"Date: "+s(l.value.date),1),t("div",null,"Due: "+s(l.value.dueDate),1)])]),t("div",ds,[e[33]||(e[33]=t("div",{class:"text-uppercase muted-label"},"Bill To",-1)),t("div",us,s((C=A.value)==null?void 0:C.name),1),R.value?(a(),n("div",rs,s(R.value.line1)+", "+s(R.value.city),1)):i("",!0),(Y=A.value)!=null&&Y.taxId?(a(),n("div",vs,"VAT/TAX ID: "+s(A.value.taxId),1)):i("",!0),y.value?(a(),n("div",ms,[M(s(y.value.name),1),y.value.email?(a(),n("span",cs," · "+s(y.value.email),1)):i("",!0),y.value.phone?(a(),n("span",ps," · "+s(y.value.phone),1)):i("",!0)])):i("",!0)]),t("table",bs,[e[34]||(e[34]=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"Product / Description"),t("th",{class:"text-end"},"Qty"),t("th",{class:"text-end"},"Unit"),t("th",{class:"text-end"},"Discount"),t("th",{class:"text-end"},"Line")])],-1)),t("tbody",null,[(a(!0),n(V,null,H(l.value.items,d=>{var z,$;return a(),n("tr",{key:d.id},[t("td",null,[t("div",hs,s(((z=B(d.productId))==null?void 0:z.name)||d.description||"—"),1),d.description&&(($=B(d.productId))==null?void 0:$.name)!==d.description?(a(),n("div",xs,s(d.description),1)):i("",!0)]),t("td",ys,s(d.qty),1),t("td",_s,s(Number(d.unitPrice||0).toFixed(2)),1),t("td",gs,[(d.discountType||"none")==="percent"?(a(),n("span",fs,"-"+s(Number(d.discountValue||0).toFixed(0))+"%",1)):(d.discountType||"none")==="fixed"?(a(),n("span",ks,"-"+s((Number(d.discountValue||0)*Number(d.qty||0)).toFixed(2)),1)):(a(),n("span",Fs,"—"))]),t("td",Ns,s(X(d).toFixed(2)),1)])}),128))])]),t("div",Is,[e[44]||(e[44]=t("div",{class:"flex-grow-1"},null,-1)),t("div",ws,[t("div",Ts,[e[35]||(e[35]=t("span",null,"Subtotal",-1)),t("span",null,s(c.value.sub.toFixed(2)),1)]),t("div",As,[e[36]||(e[36]=t("span",null,"Tax",-1)),t("span",null,s(c.value.tax.toFixed(2)),1)]),t("div",Ss,[e[38]||(e[38]=t("span",null,"Shipping",-1)),t("span",null,[l.value.shippingFree?(a(),n(V,{key:0},[t("span",Ds,s(Number(l.value.shippingAmount||0).toFixed(2)),1),e[37]||(e[37]=t("span",{class:"ms-1"},"0.00",-1))],64)):(a(),n(V,{key:1},[M(s(c.value.shipping.toFixed(2)),1)],64))])]),t("div",$s,[e[39]||(e[39]=t("span",null,"Total",-1)),t("span",null,s(c.value.total.toFixed(2)),1)]),f.value>0?(a(),n("div",Cs,[e[40]||(e[40]=t("span",null,"Credits",-1)),t("span",null,"-"+s(f.value.toFixed(2)),1)])):i("",!0),l.value.paidInFull||Number(l.value.receivedAmount||0)>0?(a(),n("div",Ps,[e[41]||(e[41]=t("span",null,"Received",-1)),t("span",null,s(Number(l.value.receivedAmount||0).toFixed(2)),1)])):i("",!0),Number(l.value.changeAmount||0)>0?(a(),n("div",Ms,[e[42]||(e[42]=t("span",null,"Change",-1)),t("span",null,s(Number(l.value.changeAmount||0).toFixed(2)),1)])):i("",!0),l.value.paidInFull||Number(l.value.receivedAmount||0)>0||f.value>0?(a(),n("div",Vs,[e[43]||(e[43]=t("span",{class:"fw-semibold"},"Balance Due",-1)),t("span",zs,s(Math.max(0,c.value.total-f.value-Number(l.value.receivedAmount||0)).toFixed(2)),1)])):i("",!0),w.value?(a(),n("div",Ls," Shipping via "+s((j=w.value)==null?void 0:j.name),1)):i("",!0)])]),S.value&&!l.value.paidInFull&&O.value.length?(a(),n("div",qs,[t("strong",null,"Payment Schedule — "+s((tt=S.value)==null?void 0:tt.name),1),t("table",Bs,[e[45]||(e[45]=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"Installment"),t("th",null,"Date"),t("th",{class:"text-end"},"Amount")])],-1)),t("tbody",null,[(a(!0),n(V,null,H(O.value,d=>(a(),n("tr",{key:d[0]+d[1]},[t("td",null,s(d[0]),1),t("td",null,s(d[1]),1),t("td",Rs,s(Number(d[2]).toFixed(2)),1)]))),128))])])])):i("",!0),(Q=N.value)!=null&&Q.content?(a(),n("div",js,[e[46]||(e[46]=t("strong",null,"Terms",-1)),t("div",Es,s(N.value.content),1)])):i("",!0),(W=(U=E(k).settings)==null?void 0:U.invoice)!=null&&W.footerText?(a(),n("div",Xs,s(E(k).settings.invoice.footerText),1)):i("",!0),l.value.notes?(a(),n("div",Os,[e[47]||(e[47]=t("strong",null,"Notes",-1)),t("div",Ys,s(l.value.notes),1)])):i("",!0)],512),t("div",Hs,[t("div",Qs,[t("div",Us,s((K=F.value)==null?void 0:K.name),1),T.value?(a(),n("div",Ws,s(T.value.line1)+", "+s(T.value.city),1)):i("",!0),(G=F.value)!=null&&G.taxId?(a(),n("div",Ks,"VAT/TAX: "+s(F.value.taxId),1)):i("",!0)]),e[61]||(e[61]=t("hr",{class:"pos-hr"},null,-1)),e[62]||(e[62]=t("div",{class:"center title"},"TAX INVOICE",-1)),t("div",Gs,[e[48]||(e[48]=t("span",null,"No:",-1)),t("span",null,s((J=l.value)==null?void 0:J.number),1)]),t("div",Js,[e[49]||(e[49]=t("span",null,"Date:",-1)),t("span",null,s((p=l.value)==null?void 0:p.date),1)]),(P=A.value)!=null&&P.name?(a(),n("div",Zs,[e[50]||(e[50]=t("span",null,"Customer:",-1)),t("span",null,s(A.value.name),1)])):i("",!0),e[63]||(e[63]=t("hr",{class:"pos-hr"},null,-1)),t("table",tl,[e[52]||(e[52]=t("thead",null,[t("tr",null,[t("th",{class:"sl"},"SL"),t("th",null,"Item Description"),t("th",{class:"amt"},"Amount")])],-1)),t("tbody",null,[(a(!0),n(V,null,H(l.value.items,(d,z)=>{var $;return a(),n("tr",{key:d.id},[t("td",el,s(String(z+1).padStart(2,"0")),1),t("td",sl,[t("div",ll,s((($=B(d.productId))==null?void 0:$.name)||d.description||"—"),1),t("div",nl,s(Number(d.qty||0))+" x "+s(Number(d.unitPrice||0).toFixed(2)),1)]),t("td",al,s(X(d).toFixed(2)),1)])}),128)),!l.value.items||!l.value.items.length?(a(),n("tr",ol,[...e[51]||(e[51]=[t("td",{colspan:"3",class:"small muted"},"No items",-1)])])):i("",!0)])]),e[64]||(e[64]=t("hr",{class:"pos-hr"},null,-1)),t("div",il,[t("div",dl,[e[53]||(e[53]=t("span",null,"Subtotal",-1)),t("span",null,s(c.value.sub.toFixed(2)),1)]),t("div",ul,[e[54]||(e[54]=t("span",null,"VAT",-1)),t("span",null,s(c.value.tax.toFixed(2)),1)]),c.value.shipping>0?(a(),n("div",rl,[e[55]||(e[55]=t("span",null,"Shipping",-1)),t("span",null,s(c.value.shipping.toFixed(2)),1)])):i("",!0),t("div",vl,[e[56]||(e[56]=t("span",null,"Net Amount",-1)),t("span",null,s(c.value.total.toFixed(2)),1)]),f.value>0?(a(),n("div",ml,[e[57]||(e[57]=t("span",null,"Credits",-1)),t("span",null,"-"+s(f.value.toFixed(2)),1)])):i("",!0),l.value.paidInFull||Number(l.value.receivedAmount||0)>0?(a(),n("div",cl,[e[58]||(e[58]=t("span",null,"Received",-1)),t("span",null,s(Number(l.value.receivedAmount||0).toFixed(2)),1)])):i("",!0),Number(l.value.changeAmount||0)>0?(a(),n("div",pl,[e[59]||(e[59]=t("span",null,"Change",-1)),t("span",null,s(Number(l.value.changeAmount||0).toFixed(2)),1)])):i("",!0),l.value.paidInFull||Number(l.value.receivedAmount||0)>0||f.value>0?(a(),n("div",bl,[e[60]||(e[60]=t("span",null,"Balance",-1)),t("span",null,s(Math.max(0,c.value.total-f.value-Number(l.value.receivedAmount||0)).toFixed(2)),1)])):i("",!0)]),e[65]||(e[65]=t("hr",{class:"pos-hr"},null,-1)),w.value?(a(),n("div",hl,"Shipping via "+s((I=w.value)==null?void 0:I.name),1)):i("",!0),e[66]||(e[66]=t("div",{class:"small muted"},"Prices inclusive of VAT where applicable.",-1)),(ut=(Z=E(k).settings)==null?void 0:Z.invoice)!=null&&ut.footerText?(a(),n("div",xl,s(E(k).settings.invoice.footerText),1)):i("",!0),e[67]||(e[67]=t("div",{class:"center small",style:{"margin-top":"6px"}},"Thank you!",-1))]),t("div",yl,[t("div",_l,[t("div",gl,s((rt=F.value)==null?void 0:rt.name),1),T.value?(a(),n("div",fl,s(T.value.line1)+", "+s(T.value.city),1)):i("",!0),(vt=F.value)!=null&&vt.taxId?(a(),n("div",kl,"VAT/TAX: "+s(F.value.taxId),1)):i("",!0)]),e[81]||(e[81]=t("hr",{class:"pos-hr"},null,-1)),e[82]||(e[82]=t("div",{class:"center title"},"TAX INVOICE",-1)),t("div",Fl,[e[68]||(e[68]=t("span",null,"No:",-1)),t("span",null,s((mt=l.value)==null?void 0:mt.number),1)]),t("div",Nl,[e[69]||(e[69]=t("span",null,"Date:",-1)),t("span",null,s((ct=l.value)==null?void 0:ct.date),1)]),(pt=A.value)!=null&&pt.name?(a(),n("div",Il,[e[70]||(e[70]=t("span",null,"Customer:",-1)),t("span",null,s(A.value.name),1)])):i("",!0),e[83]||(e[83]=t("hr",{class:"pos-hr"},null,-1)),t("table",wl,[e[72]||(e[72]=t("thead",null,[t("tr",null,[t("th",{class:"sl"},"SL"),t("th",null,"Item Description"),t("th",{class:"amt"},"Amount")])],-1)),t("tbody",null,[(a(!0),n(V,null,H(l.value.items,(d,z)=>{var $;return a(),n("tr",{key:d.id},[t("td",Tl,s(String(z+1).padStart(2,"0")),1),t("td",Al,[t("div",Sl,s((($=B(d.productId))==null?void 0:$.name)||d.description||"—"),1),t("div",Dl,s(Number(d.qty||0))+" x "+s(Number(d.unitPrice||0).toFixed(2)),1)]),t("td",$l,s(X(d).toFixed(2)),1)])}),128)),!l.value.items||!l.value.items.length?(a(),n("tr",Cl,[...e[71]||(e[71]=[t("td",{colspan:"3",class:"small muted"},"No items",-1)])])):i("",!0)])]),e[84]||(e[84]=t("hr",{class:"pos-hr"},null,-1)),t("div",Pl,[t("div",Ml,[e[73]||(e[73]=t("span",null,"Subtotal",-1)),t("span",null,s(c.value.sub.toFixed(2)),1)]),t("div",Vl,[e[74]||(e[74]=t("span",null,"VAT",-1)),t("span",null,s(c.value.tax.toFixed(2)),1)]),c.value.shipping>0?(a(),n("div",zl,[e[75]||(e[75]=t("span",null,"Shipping",-1)),t("span",null,s(c.value.shipping.toFixed(2)),1)])):i("",!0),t("div",Ll,[e[76]||(e[76]=t("span",null,"Net Amount",-1)),t("span",null,s(c.value.total.toFixed(2)),1)]),f.value>0?(a(),n("div",ql,[e[77]||(e[77]=t("span",null,"Credits",-1)),t("span",null,"-"+s(f.value.toFixed(2)),1)])):i("",!0),l.value.paidInFull||Number(l.value.receivedAmount||0)>0?(a(),n("div",Bl,[e[78]||(e[78]=t("span",null,"Received",-1)),t("span",null,s(Number(l.value.receivedAmount||0).toFixed(2)),1)])):i("",!0),Number(l.value.changeAmount||0)>0?(a(),n("div",Rl,[e[79]||(e[79]=t("span",null,"Change",-1)),t("span",null,s(Number(l.value.changeAmount||0).toFixed(2)),1)])):i("",!0),l.value.paidInFull||Number(l.value.receivedAmount||0)>0||f.value>0?(a(),n("div",jl,[e[80]||(e[80]=t("span",null,"Balance",-1)),t("span",null,s(Math.max(0,c.value.total-f.value-Number(l.value.receivedAmount||0)).toFixed(2)),1)])):i("",!0)]),e[85]||(e[85]=t("hr",{class:"pos-hr"},null,-1)),w.value?(a(),n("div",El,"Shipping via "+s((bt=w.value)==null?void 0:bt.name),1)):i("",!0),e[86]||(e[86]=t("div",{class:"small muted"},"Prices inclusive of VAT where applicable.",-1)),(xt=(ht=E(k).settings)==null?void 0:ht.invoice)!=null&&xt.footerText?(a(),n("div",Xl,s(E(k).settings.invoice.footerText),1)):i("",!0),e[87]||(e[87]=t("div",{class:"center small",style:{"margin-top":"6px"}},"Thank you!",-1))])]}),_:1})])):(a(),n("div",Ol,"Invoice not found."))}},Kl=Ct(Yl,[["__scopeId","data-v-0a8f32ff"]]);export{Kl as default};
