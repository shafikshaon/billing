import{r as b,e as v,s as g,c as u,a as t,b as $,w as C,f as N,o as r,g as V,F as A,h as B,t as o,i as D,v as L,j as M}from"./index-CHdhSjhx.js";import{_ as R}from"./SectionCard-D4lkJobp.js";const S={class:"row g-3"},P={class:"col-12"},j={class:"d-flex gap-2"},z={class:"table table-sm align-middle mb-2"},E={class:"fw-medium"},F={class:"badge text-bg-secondary text-capitalize"},I={class:"text-end"},T={class:"btn-group btn-group-sm"},Z=["onClick"],q=["onClick"],U=["onClick"],G={key:0},H={class:"d-flex justify-content-between align-items-center"},J={class:"small text-muted"},K={class:"btn-group btn-group-sm"},O=["disabled"],Q=["disabled"],p=8,tt={__name:"CustomersList",setup(W){const c=N(),d=b(""),a=b(!0),l=b(1),_=v(()=>{const n=d.value.trim().toLowerCase();let e=g.customers.slice();return n&&(e=e.filter(s=>s.name?.toLowerCase().includes(n))),e.sort((s,i)=>{const f=(s.name||"").localeCompare(i.name||"");return a.value?f:-f}),e}),m=v(()=>Math.max(1,Math.ceil(_.value.length/p))),h=v(()=>{const e=(Math.min(l.value,m.value)-1)*p;return _.value.slice(e,e+p)});function y(){c.push("/customers/new")}function w(n){c.push(`/customers/${n.id}`)}function k(n){c.push(`/customers/${n.id}/edit`)}function x(n){confirm(`Delete customer "${n.name}"?`)&&M(g.customers,n.id)}return(n,e)=>(r(),u("div",S,[t("div",P,[$(R,{title:"Customers"},{actions:C(()=>[t("div",j,[D(t("input",{class:"form-control form-control-sm",placeholder:"Search...","onUpdate:modelValue":e[0]||(e[0]=s=>d.value=s)},null,512),[[L,d.value]]),t("button",{class:"btn btn-sm btn-outline-secondary",type:"button",onClick:e[1]||(e[1]=s=>a.value=!a.value)}," Sort "+o(a.value?"A→Z":"Z→A"),1),t("button",{class:"btn btn-sm btn-primary",type:"button",onClick:y},"New")])]),default:C(()=>[t("table",z,[e[5]||(e[5]=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"Name"),t("th",null,"Type"),t("th",null,"Addresses"),t("th",null,"Contacts"),t("th",{class:"text-end"})])],-1)),t("tbody",null,[(r(!0),u(A,null,B(h.value,s=>(r(),u("tr",{key:s.id},[t("td",E,o(s.name),1),t("td",null,[t("span",F,o(s.type),1)]),t("td",null,o(s.addresses?.length||0),1),t("td",null,o(s.contacts?.length||0),1),t("td",I,[t("div",T,[t("button",{class:"btn btn-outline-secondary",onClick:i=>w(s)},"View",8,Z),t("button",{class:"btn btn-outline-secondary",onClick:i=>k(s)},"Edit",8,q),t("button",{class:"btn btn-outline-danger",onClick:i=>x(s)},"Delete",8,U)])])]))),128)),h.value.length===0?(r(),u("tr",G,[...e[4]||(e[4]=[t("td",{colspan:"5",class:"text-muted"},"No customers found.",-1)])])):V("",!0)])]),t("div",H,[t("div",J,"Page "+o(l.value)+" of "+o(m.value),1),t("div",K,[t("button",{class:"btn btn-outline-secondary",disabled:l.value<=1,onClick:e[2]||(e[2]=s=>l.value--)},"Prev",8,O),t("button",{class:"btn btn-outline-secondary",disabled:l.value>=m.value,onClick:e[3]||(e[3]=s=>l.value++)},"Next",8,Q)])])]),_:1})])]))}};export{tt as default};
