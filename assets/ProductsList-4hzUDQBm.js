import{r as v,e as _,s as c,c as i,a as t,b as V,w as g,f as D,o as u,g as P,F as T,h as F,t as o,u as y,i as I,v as B,j as L}from"./index-CHdhSjhx.js";import{_ as M}from"./SectionCard-D4lkJobp.js";const R={class:"row g-3"},S={class:"col-12"},A={class:"d-flex gap-2"},j={class:"table table-sm align-middle mb-2"},z={class:"fw-medium"},E={class:"text-uppercase"},U={class:"text-capitalize"},Z={key:0},q={key:1,class:"text-muted"},G={class:"text-end"},H={class:"btn-group btn-group-sm"},J=["onClick"],K=["onClick"],O=["onClick"],Q={key:0},W={class:"d-flex justify-content-between align-items-center"},X={class:"small text-muted"},Y={class:"btn-group btn-group-sm"},tt=["disabled"],et=["disabled"],p=10,lt={__name:"ProductsList",setup(st){const r=D(),m=v(""),d=v(!0),a=v(1),h=_(()=>{const n=m.value.trim().toLowerCase();let s=c.products.slice();return n&&(s=s.filter(e=>e.name?.toLowerCase().includes(n))),s.sort((e,l)=>{const x=(e.name||"").localeCompare(l.name||"");return d.value?x:-x}),s}),b=_(()=>Math.max(1,Math.ceil(h.value.length/p))),f=_(()=>{const s=(Math.min(a.value,b.value)-1)*p;return h.value.slice(s,s+p)});function k(){r.push("/products/new")}function w(n){r.push(`/products/${n.id}`)}function C(n){r.push(`/products/${n.id}/edit`)}function N(n){confirm(`Delete product "${n.name}"?`)&&L(c.products,n.id)}function $(n){return!n.discountType||n.discountType==="none"||!n.discountValue?"—":n.discountType==="percent"?`${Number(n.discountValue).toFixed(0)}%`:`৳${Number(n.discountValue).toFixed(2)}`}return(n,s)=>(u(),i("div",R,[t("div",S,[V(M,{title:"Products"},{actions:g(()=>[t("div",A,[I(t("input",{class:"form-control form-control-sm",placeholder:"Search...","onUpdate:modelValue":s[0]||(s[0]=e=>m.value=e)},null,512),[[B,m.value]]),t("button",{class:"btn btn-sm btn-outline-secondary",type:"button",onClick:s[1]||(s[1]=e=>d.value=!d.value)}," Sort "+o(d.value?"A→Z":"Z→A"),1),t("button",{class:"btn btn-sm btn-primary",type:"button",onClick:k},"New")])]),default:g(()=>[t("table",j,[s[5]||(s[5]=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"Name"),t("th",null,"Unit"),t("th",null,"Type"),t("th",null,"Price"),t("th",null,"Discount"),t("th",null,"Tax"),t("th",{class:"text-end"})])],-1)),t("tbody",null,[(u(!0),i(T,null,F(f.value,e=>(u(),i("tr",{key:e.id},[t("td",z,o(e.name),1),t("td",E,o(e.unit),1),t("td",U,o(e.type),1),t("td",null,o(Number(e.price||0).toFixed(2)),1),t("td",null,o($(e)),1),t("td",null,[e.taxId?(u(),i("span",Z,o(y(c).taxes.find(l=>l.id===e.taxId)?.name)+" ("+o(y(c).taxes.find(l=>l.id===e.taxId)?.rate)+"%)",1)):(u(),i("span",q,"None"))]),t("td",G,[t("div",H,[t("button",{class:"btn btn-outline-secondary",onClick:l=>w(e)},"View",8,J),t("button",{class:"btn btn-outline-secondary",onClick:l=>C(e)},"Edit",8,K),t("button",{class:"btn btn-outline-danger",onClick:l=>N(e)},"Delete",8,O)])])]))),128)),f.value.length===0?(u(),i("tr",Q,[...s[4]||(s[4]=[t("td",{colspan:"7",class:"text-muted"},"No products found.",-1)])])):P("",!0)])]),t("div",W,[t("div",X,"Page "+o(a.value)+" of "+o(b.value),1),t("div",Y,[t("button",{class:"btn btn-outline-secondary",disabled:a.value<=1,onClick:s[2]||(s[2]=e=>a.value--)},"Prev",8,tt),t("button",{class:"btn btn-outline-secondary",disabled:a.value>=b.value,onClick:s[3]||(s[3]=e=>a.value++)},"Next",8,et)])])]),_:1})])]))}};export{lt as default};
