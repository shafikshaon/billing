var te=(ne,Z,V)=>new Promise((P,l)=>{var f=I=>{try{C(V.next(I))}catch(w){l(w)}},F=I=>{try{C(V.throw(I))}catch(w){l(w)}},C=I=>I.done?P(I.value):Promise.resolve(I.value).then(f,F);C((V=V.apply(ne,Z)).next())});import{s as _e,b as g,u as ke,e as o,o as i,f as t,p as Ne,k as ce,v as Fe,i as a,t as s,B as se,F as R,h as J,l as L}from"./vendor-CDgTUOzk.js";import{S as Ie}from"./SectionCard-Emg7MEbk.js";import{s as y}from"./index-DuACpEyu.js";const we={key:0,class:"row g-3"},Te={class:"col-12"},Ae={class:"btn-group btn-group-sm"},Se={class:"d-flex justify-content-between mb-3"},De={key:0},$e={key:1},Ce={key:2,class:"text-muted small"},Me={key:3},Ve={key:4,class:"text-muted small"},Pe={key:0},ze={key:1},Le={class:"text-end"},qe={class:"mb-2 info-block"},Be={class:"fw-semibold"},Re={key:0},Ee={key:1,class:"text-muted small"},je={key:2,class:"text-muted small"},Xe={key:0},Oe={key:1},Ye={class:"table table-sm table-invoice align-middle mt-2"},He={class:"fw-medium"},Qe={key:0,class:"text-muted small"},Ue={class:"text-end"},We={class:"text-end"},Ke={class:"text-end"},Ge={key:0},Je={key:1},Ze={key:2},et={class:"text-end"},tt={class:"mt-2 d-flex"},st={class:"totals-card"},nt={class:"line"},lt={class:"line"},ot={class:"line"},it={class:"text-decoration-line-through"},at={class:"line grand"},dt={key:0,class:"line"},ut={key:1,class:"line"},rt={key:2,class:"line"},mt={key:3,class:"line"},ct={class:"fw-semibold"},pt={key:4,class:"muted small mt-1"},vt={key:0,class:"mt-2"},ht={class:"table table-sm mt-1"},xt={class:"text-end"},bt={key:1,class:"mt-3 invoice-terms"},gt={style:{"white-space":"pre-wrap"}},yt={key:2,class:"mt-2 text-muted"},ft={key:3,class:"mt-2"},_t={style:{"white-space":"pre-wrap"}},kt={class:"pos-receipt","aria-hidden":"true"},Nt={class:"pos-head center"},Ft={class:"title"},It={key:0,class:"small muted"},wt={key:1,class:"small muted"},Tt={class:"pos-line small"},At={class:"pos-line small"},St={key:0,class:"pos-line small"},Dt={class:"pos-items"},$t={class:"sl"},Ct={class:"desc"},Mt={class:"nm"},Vt={class:"muted small"},Pt={class:"amt"},zt={key:0},Lt={class:"pos-totals"},qt={class:"pos-line"},Bt={class:"pos-line"},Rt={key:0,class:"pos-line"},Et={class:"pos-line grand"},jt={key:1,class:"pos-line"},Xt={key:2,class:"pos-line"},Ot={key:3,class:"pos-line"},Yt={key:4,class:"pos-line"},Ht={key:1,class:"small muted"},Qt={key:2,class:"center small muted",style:{"margin-top":"4px"}},Ut={class:"pos-receipt","aria-hidden":"true"},Wt={class:"pos-head center"},Kt={class:"title"},Gt={key:0,class:"small muted"},Jt={key:1,class:"small muted"},Zt={class:"pos-line small"},es={class:"pos-line small"},ts={key:0,class:"pos-line small"},ss={class:"pos-items"},ns={class:"sl"},ls={class:"desc"},os={class:"nm"},is={class:"muted small"},as={class:"amt"},ds={key:0},us={class:"pos-totals"},rs={class:"pos-line"},ms={class:"pos-line"},cs={key:0,class:"pos-line"},ps={class:"pos-line grand"},vs={key:1,class:"pos-line"},hs={key:2,class:"pos-line"},xs={key:3,class:"pos-line"},bs={key:4,class:"pos-line"},gs={key:1,class:"small muted"},ys={key:2,class:"center small muted",style:{"margin-top":"4px"}},fs={key:1,class:"text-muted"},Is={__name:"InvoiceView",setup(ne){const Z=ke(),V=Fe(),P=_e(null),l=g(()=>y.invoices.find(n=>n.id===Z.params.id)),f=g(()=>y.merchants.find(n=>{var e;return n.id===((e=l.value)==null?void 0:e.merchantId)})),F=g(()=>y.customers.find(n=>{var e;return n.id===((e=l.value)==null?void 0:e.customerId)})),C=g(()=>y.paymentTerms.find(n=>{var e;return n.id===((e=l.value)==null?void 0:e.paymentTermId)})),I=g(()=>y.termsTemplates.find(n=>{var e;return n.id===((e=l.value)==null?void 0:e.termsTemplateId)})),w=g(()=>y.shippingMethods.find(n=>{var e;return n.id===((e=l.value)==null?void 0:e.shippingMethodId)}));function E(n){return y.products.find(e=>e.id===n)}const le=g(()=>{var n;return((n=f.value)==null?void 0:n.addresses)||[]}),oe=g(()=>{var n;return((n=f.value)==null?void 0:n.contacts)||[]}),S=g(()=>le.value.find(n=>{var e;return n.id===((e=l.value)==null?void 0:e.merchantAddressId)})||le.value[0]),T=g(()=>oe.value.find(n=>{var e;return n.id===((e=l.value)==null?void 0:e.merchantContactId)})||oe.value[0]),ie=g(()=>{var n;return((n=F.value)==null?void 0:n.addresses)||[]}),ae=g(()=>{var n;return((n=F.value)==null?void 0:n.contacts)||[]}),ee=g(()=>ie.value.find(n=>{var e;return n.id===((e=l.value)==null?void 0:e.customerAddressId)})||ie.value[0]),A=g(()=>ae.value.find(n=>{var e;return n.id===((e=l.value)==null?void 0:e.customerContactId)})||ae.value[0]);function j(n){const e=(Number(n.qty)||0)*(Number(n.unitPrice)||0),u=n.discountType||"none",d=Number(n.discountValue)||0,h=u==="percent"?e*d/100:u==="fixed"?(Number(n.qty)||0)*d:0;return Math.max(0,e-h)}const v=g(()=>{var h,c;const n=l.value;if(!n)return{sub:0,tax:0,shipping:0,total:0};let e=0,u=0;for(const r of n.items||[]){const b=j(r);e+=b;const x=y.taxes.find(N=>N.id===r.taxId);x&&(u+=b*(Number(x.rate)||0)/100)}const d=Number(n.shippingFree?0:(c=(h=n.shippingAmount)!=null?h:n.shippingFee)!=null?c:0);return{sub:e,tax:u,shipping:d,total:e+u+d}});function pe(n,e){const[u,d,h]=String(n||"").split("-").map(Number),c=new Date(u||0,(d||1)-1,h||1);c.setDate(c.getDate()+(Number(e)||0));const r=c.getFullYear(),b=String(c.getMonth()+1).padStart(2,"0"),x=String(c.getDate()).padStart(2,"0");return`${r}-${b}-${x}`}function ve(n,e){const[u,d,h]=String(n||"").split("-").map(Number),c=new Date(u||0,(d||1)-1,h||1),r=new Date(c.getFullYear(),c.getMonth()+1,1),b=new Date(r.getFullYear(),r.getMonth()+1,0).getDate();r.setDate(Math.min(Number(e)||1,b));const x=r.getFullYear(),N=String(r.getMonth()+1).padStart(2,"0"),D=String(r.getDate()).padStart(2,"0");return`${x}-${N}-${D}`}const K=g(()=>{const n=l.value,e=C.value;if(!n||!e||n.paidInFull)return[];const u=v.value.total,d=(e.schedule||[]).slice().sort((c,r)=>(c.sequence||0)-(r.sequence||0));let h=u;return d.map((c,r)=>{const b=c.dateType==="day_of_month"?ve(n.date,c.dayOfMonth||1):pe(n.date,c.days||0);let x=c.valueType==="percent"?u*(Number(c.valueAmount)||0)/100:Number(c.valueAmount)||0;return r===d.length-1&&(x=h),h=Math.max(0,h-x),[c.description||`Installment ${r+1}`,b,x]})}),he=g(()=>(y.creditNotes||[]).filter(n=>{var e;return n.originalInvoiceId===((e=l.value)==null?void 0:e.id)&&(n.status==="issued"||n.status==="applied")}));function xe(n){return(n.items||[]).reduce((u,d)=>{const h=(Number(d.qty)||0)*(Number(d.unitPrice)||0),c=d.discountType||"none",r=Number(d.discountValue)||0,b=c==="percent"?h*r/100:c==="fixed"?(Number(d.qty)||0)*r:0,x=Math.max(0,h-b),N=(()=>{const D=y.taxes.find(q=>q.id===d.taxId);return D?x*(Number(D.rate)||0)/100:0})();return u+x+N},0)}const k=g(()=>he.value.reduce((n,e)=>n+xe(e),0));function be(){var r,b;if(!(P!=null&&P.value))return;const n=P.value.outerHTML,e=document.createElement("iframe");e.style.position="fixed",e.style.right="0",e.style.bottom="0",e.style.width="0",e.style.height="0",e.style.border="0",document.body.appendChild(e);const u=e.contentDocument||((r=e.contentWindow)==null?void 0:r.document);if(!u){document.body.removeChild(e);return}u.open(),u.write(`
    <html>
      <head>
        <meta charset="utf-8"/>
        <title>${((b=l.value)==null?void 0:b.number)||"Invoice"}</title>
        <link rel="stylesheet" href="https://bootswatch.com/5/pulse/bootstrap.min.css"/>
        <style>
          @page { size: A4; margin: 10mm; }
          html, body { margin: 0; padding: 0; background: #fff; -webkit-print-color-adjust: exact; print-color-adjust: exact; }
          /* Keep content within the printable area (190mm after margins) */
          .print-area { width: auto; max-width: 190mm; margin: 0 auto; border: none; }
          .print-area h4 { font-size: 20px; color: #4a148c; }
          .print-area table { font-size: 12px; }
          /* Match the detail view styling */
          .table td, .table th { vertical-align: middle; }
          .info-block { border: 1px solid rgba(0,0,0,.08); border-radius: .5rem; padding: .5rem .75rem; background: #fafafa; }
          .muted-label { font-size: .72rem; letter-spacing: .08em; color: #6c757d; }
          .totals-card { border: 1px solid rgba(0,0,0,.08); border-radius: .5rem; padding: .5rem .75rem; min-width: 160px; }
          .totals-card .line { display: flex; justify-content: space-between; }
          .totals-card .grand { font-weight: 700; }
        </style>
      </head>
      <body>${n}</body>
    </html>
  `),u.close();const d=e.contentWindow,h=()=>setTimeout(()=>{document.body.removeChild(e)},0),c=()=>{try{d.focus(),d.print()}finally{h()}};u.readyState==="complete"?setTimeout(c,150):d.addEventListener("load",()=>setTimeout(c,150))}function ge(){document.body.classList.add("pos-print");const n=()=>document.body.classList.remove("pos-print");window.addEventListener("afterprint",n,{once:!0}),setTimeout(()=>{try{window.print()}finally{setTimeout(n,1200)}},50)}function ye(){return te(this,null,function*(){var X,O,Y,H,Q,U;if(!l.value)return;function n(){return te(this,null,function*(){return window.pdfMake||(yield new Promise((p,$)=>{const _=document.createElement("script");_.src="https://cdn.jsdelivr.net/npm/pdfmake@0.2.10/build/pdfmake.min.js",_.onload=p,_.onerror=$,document.body.appendChild(_)}),yield new Promise((p,$)=>{const _=document.createElement("script");_.src="https://cdn.jsdelivr.net/npm/pdfmake@0.2.10/build/vfs_fonts.min.js",_.onload=p,_.onerror=$,document.body.appendChild(_)})),window.pdfMake})}yield n();const e=l.value,u=f.value,d=F.value;function h(p){return(p.discountType||"none")==="percent"?`-${Number(p.discountValue||0).toFixed(0)}%`:(p.discountType||"none")==="fixed"?`- ${(Number(p.discountValue||0)*Number(p.qty||0)).toFixed(2)}`:"—"}const c=[[{text:"Product / Description",bold:!0},{text:"Qty",alignment:"right",bold:!0},{text:"Unit",alignment:"right",bold:!0},{text:"Discount",alignment:"right",bold:!0},{text:"Line",alignment:"right",bold:!0}],...(e.items||[]).map(p=>{var $;return[(($=E(p.productId))==null?void 0:$.name)||p.description||"—",{text:String(p.qty||0),alignment:"right"},{text:Number(p.unitPrice||0).toFixed(2),alignment:"right"},{text:h(p),alignment:"right"},{text:j(p).toFixed(2),alignment:"right"}]})],r=[{text:`Subtotal: ${v.value.sub.toFixed(2)}`},{text:`Tax: ${v.value.tax.toFixed(2)}`}],b=!!e.shippingFree;Number((O=(X=e.shippingAmount)!=null?X:e.shippingFee)!=null?O:0),b?r.push({text:"Shipping: 0.00 (free)",color:"#6c757d"}):r.push({text:`Shipping: ${v.value.shipping.toFixed(2)}`}),r.push({text:`Total: ${v.value.total.toFixed(2)}`,bold:!0});const x=Number(k.value||0);x>0&&r.push({text:`Credits: -${x.toFixed(2)}`});const N=Number(e.receivedAmount||0),D=Number(e.changeAmount||0);N>0&&r.push({text:`Received: ${N.toFixed(2)}`}),D>0&&r.push({text:`Change: ${D.toFixed(2)}`});const q=Math.max(0,v.value.total-x-N);(N>0||x>0||e.paidInFull)&&r.push({text:`Balance Due: ${q.toFixed(2)}`,bold:!0}),(Y=w.value)!=null&&Y.name&&r.push({text:`Shipping via ${w.value.name}`,color:"#6c757d",fontSize:9,margin:[0,4,0,0]});const z=[{columns:[[{text:(u==null?void 0:u.name)||"",bold:!0,fontSize:12},(H=u==null?void 0:u.addresses)!=null&&H.length?{text:`${u.addresses[0].line1}, ${u.addresses[0].city}`}:{},u!=null&&u.taxId?{text:`VAT/TAX ID: ${u.taxId}`,color:"#6c757d",fontSize:9}:{},T.value?{text:`${T.value.name||""}${T.value.email?" · "+T.value.email:""}${T.value.phone?" · "+T.value.phone:""}`,color:"#6c757d",fontSize:9}:{}],{width:"auto",alignment:"right",stack:[{text:"Invoice",style:"title"},{text:`No: ${e.number}`,bold:!0},{text:`Date: ${e.date}`},{text:`Due: ${e.dueDate}`}]}]},{text:" ",margin:[0,6]},{text:"BILL TO",color:"#6c757d",fontSize:9,letterSpacing:.5},{text:(d==null?void 0:d.name)||"",bold:!0},(Q=d==null?void 0:d.addresses)!=null&&Q.length?{text:`${d.addresses[0].line1}, ${d.addresses[0].city}`}:{},d!=null&&d.taxId?{text:`VAT/TAX ID: ${d.taxId}`,color:"#6c757d",fontSize:9}:{},A.value?{text:`${A.value.name||""}${A.value.email?" · "+A.value.email:""}${A.value.phone?" · "+A.value.phone:""}`,color:"#6c757d",fontSize:9}:{},{text:" ",margin:[0,6]},{table:{headerRows:1,widths:["*",40,50,55,60],body:c},layout:"lightHorizontalLines"},{columns:[{text:" "},{width:200,alignment:"right",stack:r}],margin:[0,8,0,0]}];C.value&&!e.paidInFull&&(K.value||[]).length&&z.push({text:" ",margin:[0,6]},{text:`Payment Schedule — ${C.value.name}`,bold:!0},{table:{headerRows:1,widths:["*",80,70],body:[[{text:"Installment",bold:!0},{text:"Date",bold:!0},{text:"Amount",bold:!0,alignment:"right"}],...K.value.map(p=>[p[0],p[1],{text:Number(p[2]).toFixed(2),alignment:"right"}])]},layout:"lightHorizontalLines",margin:[0,4,0,0]}),(((U=I.value)==null?void 0:U.content)||"").trim()&&z.push({text:" ",margin:[0,8]},{text:"Terms",bold:!0},{text:I.value.content,margin:[0,2,0,0]}),(e.notes||"").trim()&&z.push({text:" ",margin:[0,6]},{text:"Notes",bold:!0},{text:e.notes,margin:[0,2,0,0]});const G={pageSize:"A4",pageMargins:[28,28,28,28],content:z,footer:(p,$)=>{var _,W;return{margin:[28,8,28,16],fontSize:9,text:((W=(_=y.settings)==null?void 0:_.invoice)==null?void 0:W.footerText)||""}},styles:{title:{fontSize:18,color:"#4a148c",bold:!0}},defaultStyle:{fontSize:10}};window.pdfMake.createPdf(G).download(`invoice_${e.number||"view"}.pdf`)})}function fe(){l.value&&V.push(`/invoices/${l.value.id}/edit`)}return(n,e)=>l.value?(i(),o("div",we,[t("div",Te,[Ne(Ie,{title:`Invoice ${l.value.number}`},{actions:ce(()=>[t("div",Ae,[t("button",{class:"btn btn-outline-secondary",onClick:fe},"Edit"),t("button",{class:"btn btn-outline-secondary",onClick:be},"Print"),t("button",{class:"btn btn-outline-secondary",onClick:ge},"Receipt"),t("button",{class:"btn btn-outline-secondary",onClick:e[0]||(e[0]=()=>L(V).push(`/credit-notes/new?invoiceId=${l.value.id}`))},"New Credit Note"),t("button",{class:"btn btn-primary",onClick:ye},"Download PDF")])]),default:ce(()=>{var u,d,h,c,r,b,x,N,D,q,z,G,X,O,Y,H,Q,U,p,$,_,W,de,ue,re,me;return[t("div",{class:"print-area",ref_key:"printRef",ref:P},[t("div",Se,[t("div",null,[t("strong",null,s((u=f.value)==null?void 0:u.name),1),e[1]||(e[1]=t("br",null,null,-1)),S.value?(i(),o("span",De,s(S.value.line1)+", "+s(S.value.city),1)):a("",!0),S.value?(i(),o("br",$e)):a("",!0),(d=f.value)!=null&&d.taxId?(i(),o("span",Ce,"VAT/TAX ID: "+s(f.value.taxId),1)):a("",!0),(h=f.value)!=null&&h.taxId?(i(),o("br",Me)):a("",!0),T.value?(i(),o("span",Ve,[se(s(T.value.name),1),T.value.email?(i(),o("span",Pe," · "+s(T.value.email),1)):a("",!0),T.value.phone?(i(),o("span",ze," · "+s(T.value.phone),1)):a("",!0)])):a("",!0)]),t("div",Le,[e[2]||(e[2]=t("h4",{class:"mb-1"},"Invoice",-1)),t("div",null,[t("strong",null,"No: "+s(l.value.number),1)]),t("div",null,"Date: "+s(l.value.date),1),t("div",null,"Due: "+s(l.value.dueDate),1)])]),t("div",qe,[e[3]||(e[3]=t("div",{class:"text-uppercase muted-label"},"Bill To",-1)),t("div",Be,s((c=F.value)==null?void 0:c.name),1),ee.value?(i(),o("div",Re,s(ee.value.line1)+", "+s(ee.value.city),1)):a("",!0),(r=F.value)!=null&&r.taxId?(i(),o("div",Ee,"VAT/TAX ID: "+s(F.value.taxId),1)):a("",!0),A.value?(i(),o("div",je,[se(s(A.value.name),1),A.value.email?(i(),o("span",Xe," · "+s(A.value.email),1)):a("",!0),A.value.phone?(i(),o("span",Oe," · "+s(A.value.phone),1)):a("",!0)])):a("",!0)]),t("table",Ye,[e[4]||(e[4]=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"Product / Description"),t("th",{class:"text-end"},"Qty"),t("th",{class:"text-end"},"Unit"),t("th",{class:"text-end"},"Discount"),t("th",{class:"text-end"},"Line")])],-1)),t("tbody",null,[(i(!0),o(R,null,J(l.value.items,m=>{var B,M;return i(),o("tr",{key:m.id},[t("td",null,[t("div",He,s(((B=E(m.productId))==null?void 0:B.name)||m.description||"—"),1),m.description&&((M=E(m.productId))==null?void 0:M.name)!==m.description?(i(),o("div",Qe,s(m.description),1)):a("",!0)]),t("td",Ue,s(m.qty),1),t("td",We,s(Number(m.unitPrice||0).toFixed(2)),1),t("td",Ke,[(m.discountType||"none")==="percent"?(i(),o("span",Ge,"-"+s(Number(m.discountValue||0).toFixed(0))+"%",1)):(m.discountType||"none")==="fixed"?(i(),o("span",Je,"-"+s((Number(m.discountValue||0)*Number(m.qty||0)).toFixed(2)),1)):(i(),o("span",Ze,"—"))]),t("td",et,s(j(m).toFixed(2)),1)])}),128))])]),t("div",tt,[e[14]||(e[14]=t("div",{class:"flex-grow-1"},null,-1)),t("div",st,[t("div",nt,[e[5]||(e[5]=t("span",null,"Subtotal",-1)),t("span",null,s(v.value.sub.toFixed(2)),1)]),t("div",lt,[e[6]||(e[6]=t("span",null,"Tax",-1)),t("span",null,s(v.value.tax.toFixed(2)),1)]),t("div",ot,[e[8]||(e[8]=t("span",null,"Shipping",-1)),t("span",null,[l.value.shippingFree?(i(),o(R,{key:0},[t("span",it,s(Number(l.value.shippingAmount||0).toFixed(2)),1),e[7]||(e[7]=t("span",{class:"ms-1"},"0.00",-1))],64)):(i(),o(R,{key:1},[se(s(v.value.shipping.toFixed(2)),1)],64))])]),t("div",at,[e[9]||(e[9]=t("span",null,"Total",-1)),t("span",null,s(v.value.total.toFixed(2)),1)]),k.value>0?(i(),o("div",dt,[e[10]||(e[10]=t("span",null,"Credits",-1)),t("span",null,"-"+s(k.value.toFixed(2)),1)])):a("",!0),l.value.paidInFull||Number(l.value.receivedAmount||0)>0?(i(),o("div",ut,[e[11]||(e[11]=t("span",null,"Received",-1)),t("span",null,s(Number(l.value.receivedAmount||0).toFixed(2)),1)])):a("",!0),Number(l.value.changeAmount||0)>0?(i(),o("div",rt,[e[12]||(e[12]=t("span",null,"Change",-1)),t("span",null,s(Number(l.value.changeAmount||0).toFixed(2)),1)])):a("",!0),l.value.paidInFull||Number(l.value.receivedAmount||0)>0||k.value>0?(i(),o("div",mt,[e[13]||(e[13]=t("span",{class:"fw-semibold"},"Balance Due",-1)),t("span",ct,s(Math.max(0,v.value.total-k.value-Number(l.value.receivedAmount||0)).toFixed(2)),1)])):a("",!0),w.value?(i(),o("div",pt," Shipping via "+s((b=w.value)==null?void 0:b.name),1)):a("",!0)])]),C.value&&!l.value.paidInFull&&K.value.length?(i(),o("div",vt,[t("strong",null,"Payment Schedule — "+s((x=C.value)==null?void 0:x.name),1),t("table",ht,[e[15]||(e[15]=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"Installment"),t("th",null,"Date"),t("th",{class:"text-end"},"Amount")])],-1)),t("tbody",null,[(i(!0),o(R,null,J(K.value,m=>(i(),o("tr",{key:m[0]+m[1]},[t("td",null,s(m[0]),1),t("td",null,s(m[1]),1),t("td",xt,s(Number(m[2]).toFixed(2)),1)]))),128))])])])):a("",!0),(N=I.value)!=null&&N.content?(i(),o("div",bt,[e[16]||(e[16]=t("strong",null,"Terms",-1)),t("div",gt,s(I.value.content),1)])):a("",!0),(q=(D=L(y).settings)==null?void 0:D.invoice)!=null&&q.footerText?(i(),o("div",yt,s(L(y).settings.invoice.footerText),1)):a("",!0),l.value.notes?(i(),o("div",ft,[e[17]||(e[17]=t("strong",null,"Notes",-1)),t("div",_t,s(l.value.notes),1)])):a("",!0)],512),t("div",kt,[t("div",Nt,[t("div",Ft,s((z=f.value)==null?void 0:z.name),1),S.value?(i(),o("div",It,s(S.value.line1)+", "+s(S.value.city),1)):a("",!0),(G=f.value)!=null&&G.taxId?(i(),o("div",wt,"VAT/TAX: "+s(f.value.taxId),1)):a("",!0)]),e[31]||(e[31]=t("hr",{class:"pos-hr"},null,-1)),e[32]||(e[32]=t("div",{class:"center title"},"TAX INVOICE",-1)),t("div",Tt,[e[18]||(e[18]=t("span",null,"No:",-1)),t("span",null,s((X=l.value)==null?void 0:X.number),1)]),t("div",At,[e[19]||(e[19]=t("span",null,"Date:",-1)),t("span",null,s((O=l.value)==null?void 0:O.date),1)]),(Y=F.value)!=null&&Y.name?(i(),o("div",St,[e[20]||(e[20]=t("span",null,"Customer:",-1)),t("span",null,s(F.value.name),1)])):a("",!0),e[33]||(e[33]=t("hr",{class:"pos-hr"},null,-1)),t("table",Dt,[e[22]||(e[22]=t("thead",null,[t("tr",null,[t("th",{class:"sl"},"SL"),t("th",null,"Item Description"),t("th",{class:"amt"},"Amount")])],-1)),t("tbody",null,[(i(!0),o(R,null,J(l.value.items,(m,B)=>{var M;return i(),o("tr",{key:m.id},[t("td",$t,s(String(B+1).padStart(2,"0")),1),t("td",Ct,[t("div",Mt,s(((M=E(m.productId))==null?void 0:M.name)||m.description||"—"),1),t("div",Vt,s(Number(m.qty||0))+" x "+s(Number(m.unitPrice||0).toFixed(2)),1)]),t("td",Pt,s(j(m).toFixed(2)),1)])}),128)),!l.value.items||!l.value.items.length?(i(),o("tr",zt,[...e[21]||(e[21]=[t("td",{colspan:"3",class:"small muted"},"No items",-1)])])):a("",!0)])]),e[34]||(e[34]=t("hr",{class:"pos-hr"},null,-1)),t("div",Lt,[t("div",qt,[e[23]||(e[23]=t("span",null,"Subtotal",-1)),t("span",null,s(v.value.sub.toFixed(2)),1)]),t("div",Bt,[e[24]||(e[24]=t("span",null,"VAT",-1)),t("span",null,s(v.value.tax.toFixed(2)),1)]),v.value.shipping>0?(i(),o("div",Rt,[e[25]||(e[25]=t("span",null,"Shipping",-1)),t("span",null,s(v.value.shipping.toFixed(2)),1)])):a("",!0),t("div",Et,[e[26]||(e[26]=t("span",null,"Net Amount",-1)),t("span",null,s(v.value.total.toFixed(2)),1)]),k.value>0?(i(),o("div",jt,[e[27]||(e[27]=t("span",null,"Credits",-1)),t("span",null,"-"+s(k.value.toFixed(2)),1)])):a("",!0),l.value.paidInFull||Number(l.value.receivedAmount||0)>0?(i(),o("div",Xt,[e[28]||(e[28]=t("span",null,"Received",-1)),t("span",null,s(Number(l.value.receivedAmount||0).toFixed(2)),1)])):a("",!0),Number(l.value.changeAmount||0)>0?(i(),o("div",Ot,[e[29]||(e[29]=t("span",null,"Change",-1)),t("span",null,s(Number(l.value.changeAmount||0).toFixed(2)),1)])):a("",!0),l.value.paidInFull||Number(l.value.receivedAmount||0)>0||k.value>0?(i(),o("div",Yt,[e[30]||(e[30]=t("span",null,"Balance",-1)),t("span",null,s(Math.max(0,v.value.total-k.value-Number(l.value.receivedAmount||0)).toFixed(2)),1)])):a("",!0)]),e[35]||(e[35]=t("hr",{class:"pos-hr"},null,-1)),w.value?(i(),o("div",Ht,"Shipping via "+s((H=w.value)==null?void 0:H.name),1)):a("",!0),e[36]||(e[36]=t("div",{class:"small muted"},"Prices inclusive of VAT where applicable.",-1)),(U=(Q=L(y).settings)==null?void 0:Q.invoice)!=null&&U.footerText?(i(),o("div",Qt,s(L(y).settings.invoice.footerText),1)):a("",!0),e[37]||(e[37]=t("div",{class:"center small",style:{"margin-top":"6px"}},"Thank you!",-1))]),t("div",Ut,[t("div",Wt,[t("div",Kt,s((p=f.value)==null?void 0:p.name),1),S.value?(i(),o("div",Gt,s(S.value.line1)+", "+s(S.value.city),1)):a("",!0),($=f.value)!=null&&$.taxId?(i(),o("div",Jt,"VAT/TAX: "+s(f.value.taxId),1)):a("",!0)]),e[51]||(e[51]=t("hr",{class:"pos-hr"},null,-1)),e[52]||(e[52]=t("div",{class:"center title"},"TAX INVOICE",-1)),t("div",Zt,[e[38]||(e[38]=t("span",null,"No:",-1)),t("span",null,s((_=l.value)==null?void 0:_.number),1)]),t("div",es,[e[39]||(e[39]=t("span",null,"Date:",-1)),t("span",null,s((W=l.value)==null?void 0:W.date),1)]),(de=F.value)!=null&&de.name?(i(),o("div",ts,[e[40]||(e[40]=t("span",null,"Customer:",-1)),t("span",null,s(F.value.name),1)])):a("",!0),e[53]||(e[53]=t("hr",{class:"pos-hr"},null,-1)),t("table",ss,[e[42]||(e[42]=t("thead",null,[t("tr",null,[t("th",{class:"sl"},"SL"),t("th",null,"Item Description"),t("th",{class:"amt"},"Amount")])],-1)),t("tbody",null,[(i(!0),o(R,null,J(l.value.items,(m,B)=>{var M;return i(),o("tr",{key:m.id},[t("td",ns,s(String(B+1).padStart(2,"0")),1),t("td",ls,[t("div",os,s(((M=E(m.productId))==null?void 0:M.name)||m.description||"—"),1),t("div",is,s(Number(m.qty||0))+" x "+s(Number(m.unitPrice||0).toFixed(2)),1)]),t("td",as,s(j(m).toFixed(2)),1)])}),128)),!l.value.items||!l.value.items.length?(i(),o("tr",ds,[...e[41]||(e[41]=[t("td",{colspan:"3",class:"small muted"},"No items",-1)])])):a("",!0)])]),e[54]||(e[54]=t("hr",{class:"pos-hr"},null,-1)),t("div",us,[t("div",rs,[e[43]||(e[43]=t("span",null,"Subtotal",-1)),t("span",null,s(v.value.sub.toFixed(2)),1)]),t("div",ms,[e[44]||(e[44]=t("span",null,"VAT",-1)),t("span",null,s(v.value.tax.toFixed(2)),1)]),v.value.shipping>0?(i(),o("div",cs,[e[45]||(e[45]=t("span",null,"Shipping",-1)),t("span",null,s(v.value.shipping.toFixed(2)),1)])):a("",!0),t("div",ps,[e[46]||(e[46]=t("span",null,"Net Amount",-1)),t("span",null,s(v.value.total.toFixed(2)),1)]),k.value>0?(i(),o("div",vs,[e[47]||(e[47]=t("span",null,"Credits",-1)),t("span",null,"-"+s(k.value.toFixed(2)),1)])):a("",!0),l.value.paidInFull||Number(l.value.receivedAmount||0)>0?(i(),o("div",hs,[e[48]||(e[48]=t("span",null,"Received",-1)),t("span",null,s(Number(l.value.receivedAmount||0).toFixed(2)),1)])):a("",!0),Number(l.value.changeAmount||0)>0?(i(),o("div",xs,[e[49]||(e[49]=t("span",null,"Change",-1)),t("span",null,s(Number(l.value.changeAmount||0).toFixed(2)),1)])):a("",!0),l.value.paidInFull||Number(l.value.receivedAmount||0)>0||k.value>0?(i(),o("div",bs,[e[50]||(e[50]=t("span",null,"Balance",-1)),t("span",null,s(Math.max(0,v.value.total-k.value-Number(l.value.receivedAmount||0)).toFixed(2)),1)])):a("",!0)]),e[55]||(e[55]=t("hr",{class:"pos-hr"},null,-1)),w.value?(i(),o("div",gs,"Shipping via "+s((ue=w.value)==null?void 0:ue.name),1)):a("",!0),e[56]||(e[56]=t("div",{class:"small muted"},"Prices inclusive of VAT where applicable.",-1)),(me=(re=L(y).settings)==null?void 0:re.invoice)!=null&&me.footerText?(i(),o("div",ys,s(L(y).settings.invoice.footerText),1)):a("",!0),e[57]||(e[57]=t("div",{class:"center small",style:{"margin-top":"6px"}},"Thank you!",-1))])]}),_:1},8,["title"])])])):(i(),o("div",fs,"Invoice not found."))}};export{Is as default};
