import{s as _,b as h,e as u,o as c,f as t,p as B,k,v as D,i as P,F as S,h as T,t as n,l as g,x as F,y as L}from"./vendor-CDgTUOzk.js";import{S as M}from"./SectionCard-CnFX6nPM.js";import{s as b,r as R}from"./index-DwkO3c2h.js";const A={class:"row g-3"},z={class:"col-12"},E={class:"d-flex gap-2"},U={class:"table-wrapper"},Z={class:"table table-sm align-middle"},q={class:"fw-medium"},j={class:"text-uppercase"},G={class:"text-capitalize"},H={key:0},J={key:1,class:"text-muted"},K={class:"text-end"},O={class:"btn-group btn-group-sm"},Q=["onClick"],W=["onClick"],X=["onClick"],Y={key:0},tt={class:"table-footer"},et={class:"small text-muted"},st={class:"btn-group btn-group-sm"},ot=["disabled"],nt=["disabled"],f=10,ct={__name:"ProductsList",setup(lt){const r=D(),p=_(""),m=_(!0),a=_(1),x=h(()=>{const o=p.value.trim().toLowerCase();let s=b.products.slice();return o&&(s=s.filter(e=>{var l;return(l=e.name)==null?void 0:l.toLowerCase().includes(o)})),s.sort((e,l)=>{const d=(e.name||"").localeCompare(l.name||"");return m.value?d:-d}),s}),v=h(()=>Math.max(1,Math.ceil(x.value.length/f))),y=h(()=>{const s=(Math.min(a.value,v.value)-1)*f;return x.value.slice(s,s+f)});function C(){r.push("/products/new")}function w(){r.push("/products/bulk-import")}function N(o){r.push(`/products/${o.id}`)}function $(o){r.push(`/products/${o.id}/edit`)}function V(o){confirm(`Delete product "${o.name}"?`)&&R(b.products,o.id)}function I(o){return!o.discountType||o.discountType==="none"||!o.discountValue?"—":o.discountType==="percent"?`${Number(o.discountValue).toFixed(0)}%`:`৳${Number(o.discountValue).toFixed(2)}`}return(o,s)=>(c(),u("div",A,[t("div",z,[B(M,{title:"Products"},{actions:k(()=>[t("div",E,[F(t("input",{class:"form-control form-control-sm",placeholder:"Search...","onUpdate:modelValue":s[0]||(s[0]=e=>p.value=e)},null,512),[[L,p.value]]),t("button",{class:"btn btn-sm btn-outline-secondary",type:"button",onClick:s[1]||(s[1]=e=>m.value=!m.value)}," Sort "+n(m.value?"A→Z":"Z→A"),1),t("button",{class:"btn btn-sm btn-success",type:"button",onClick:w},"Bulk Import"),t("button",{class:"btn btn-sm btn-primary",type:"button",onClick:C},"New")])]),default:k(()=>[t("div",U,[t("table",Z,[s[5]||(s[5]=t("thead",null,[t("tr",null,[t("th",null,"Name"),t("th",null,"Unit"),t("th",null,"Type"),t("th",null,"Price"),t("th",null,"Discount"),t("th",null,"Tax"),t("th",{class:"text-end"})])],-1)),t("tbody",null,[(c(!0),u(S,null,T(y.value,e=>{var l,d;return c(),u("tr",{key:e.id},[t("td",q,n(e.name),1),t("td",j,n(e.unit),1),t("td",G,n(e.type),1),t("td",null,n(Number(e.price||0).toFixed(2)),1),t("td",null,n(I(e)),1),t("td",null,[e.taxId?(c(),u("span",H,n((l=g(b).taxes.find(i=>i.id===e.taxId))==null?void 0:l.name)+" ("+n((d=g(b).taxes.find(i=>i.id===e.taxId))==null?void 0:d.rate)+"%)",1)):(c(),u("span",J,"None"))]),t("td",K,[t("div",O,[t("button",{class:"btn btn-outline-secondary",onClick:i=>N(e)},"View",8,Q),t("button",{class:"btn btn-outline-secondary",onClick:i=>$(e)},"Edit",8,W),t("button",{class:"btn btn-outline-danger",onClick:i=>V(e)},"Delete",8,X)])])])}),128)),y.value.length===0?(c(),u("tr",Y,[...s[4]||(s[4]=[t("td",{colspan:"7",class:"text-muted"},"No products found.",-1)])])):P("",!0)])])]),t("div",tt,[t("div",et,"Page "+n(a.value)+" of "+n(v.value),1),t("div",st,[t("button",{class:"btn btn-outline-secondary",disabled:a.value<=1,onClick:s[2]||(s[2]=e=>a.value--)},"Prev",8,ot),t("button",{class:"btn btn-outline-secondary",disabled:a.value>=v.value,onClick:s[3]||(s[3]=e=>a.value++)},"Next",8,nt)])])]),_:1})])]))}};export{ct as default};
